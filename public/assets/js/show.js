function isNormalInteger(t){var e=~~Number(t);return String(e)===t&&e>=0}function downcode(t){Downcoder.Initialize();var e="",i=t.match(Downcoder.regex);if(i)for(var n=0;n<i.length;n++){if(1==i[n].length){var s=Downcoder.map[i[n]];if(null!=s){e+=s;continue}}e+=i[n]}else e=t;return e}function URLify(t,e){return t=downcode(t),t=t.replace(/[^,\-\w\s]/g,""),t=t.replace(/^\s+|\s+$/g,""),t=t.replace(/[-\s]+/g,"-"),t.substring(0,e)}function changeURL(t,e){e="/"+e;var i=window.location.pathname;if(window.location.origin)var n=window.location.origin;else var n=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");if(-1==i.indexOf(t))i=i+e+t;else{var s="";i=i.split("/");for(var o=0;o<i.length;o++)-1==i[o].indexOf(t)?""!=i[o]&&"undefined"!=i[o]&&(s=s+"/"+i[o]):s=s+e+t;i=s}i=n+i,(!$.browser.msie||$.browser.msie&&$.browser.version>9)&&window.history.pushState("object or string","Buildzoom's Newsfeed",i)}function isURLVariablePresent(t){var e=window.location.pathname,i=e.indexOf(t);return-1==i?!1:!0}function removeElementURL(t){var e=window.location.pathname;if(window.location.origin)var i=window.location.origin;else var i=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");var n="";e=e.split("/");for(var s=0;s<e.length;s++)-1==e[s].indexOf(t)&&""!=e[s]&&"undefined"!=e[s]&&(n=n+"/"+e[s]);e=n,e=i+e,(!$.browser.msie||$.browser.msie&&$.browser.version>9)&&window.history.pushState("object or string","Buildzoom's Newsfeed",e)}function getlatlgn(t){return $.ajax({url:"https://maps.googleapis.com/maps/api/geocode/json?address="+t+"&sensor=false&key=AIzaSyBnOOyydKjZSr0ZFc_ePIHpPKABzpYXN_g",dataType:"json",type:"GET",async:!1})}function add_profile_image(){$("form.edit_user").submit(),window.jQuery&&$("#uploadProfileImageModal").length>0&&($("#uploadProfileImageModal").modal("hide"),$("#serviceRequestModal").length>0&&$("#serviceRequestModal").modal("show"))}function showLoginModal(){$("#new_session_Modal").modal({show:!0}),$("#new_session_Modal").on("shown.bs.modal",function(){setTimeout(function(){$("input#password").focus(),500})})}function removeLoginModal(){$("#new_session_Modal").modal("hide"),$("#sign_in_button").hide()}function traverse_qa(t){$(t).addClass("disabled"),$.ajax({url:$(t).attr("data-href"),dataType:"html",success:function(t){$("#contractor_answers").replaceWith(t),$('body.contractors.show #contractor_answers [data-target="#contractor_answers"]').click(function(){traverse_qa(this)})}})}!function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var i,n=t(document);t.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(e){var i=t('meta[name="csrf-token"]').attr("content");i&&e.setRequestHeader("X-CSRF-Token",i)},fire:function(e,i,n){var s=t.Event(i);return e.trigger(s,n),s.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(n){var s,o,a,r,l,c,u,d;if(i.fire(n,"ajax:before")){if(r=n.data("cross-domain"),l=r===e?null:r,c=n.data("with-credentials")||null,u=n.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,n.is("form")){s=n.attr("method"),o=n.attr("action"),a=n.serializeArray();var h=n.data("ujs:submit-button");h&&(a.push(h),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(s=n.data("method"),o=n.data("url"),a=n.serialize(),n.data("params")&&(a=a+"&"+n.data("params"))):n.is(i.buttonClickSelector)?(s=n.data("method")||"get",o=n.data("url"),a=n.serialize(),n.data("params")&&(a=a+"&"+n.data("params"))):(s=n.data("method"),o=i.href(n),a=n.data("params")||null);d={type:s||"GET",data:a,dataType:u,beforeSend:function(t,s){return s.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+s.accepts.script),i.fire(n,"ajax:beforeSend",[t,s])},success:function(t,e,i){n.trigger("ajax:success",[t,e,i])},complete:function(t,e){n.trigger("ajax:complete",[t,e])},error:function(t,e,i){n.trigger("ajax:error",[t,e,i])},crossDomain:l},c&&(d.xhrFields={withCredentials:c}),o&&(d.url=o);var p=i.ajax(d);return n.trigger("ajax:send",p),p}return!1},handleMethod:function(n){var s=i.href(n),o=n.data("method"),a=n.attr("target"),r=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),c=t('<form method="post" action="'+s+'"></form>'),u='<input name="_method" value="'+o+'" type="hidden" />';l!==e&&r!==e&&(u+='<input name="'+l+'" value="'+r+'" type="hidden" />'),a&&c.attr("target",a),c.hide().append(u).appendTo("body"),c.submit()},disableFormElements:function(e){e.find(i.disableSelector).each(function(){var e=t(this),i=e.is("button")?"html":"val";e.data("ujs:enable-with",e[i]()),e[i](e.data("disable-with")),e.prop("disabled",!0)})},enableFormElements:function(e){e.find(i.enableSelector).each(function(){var e=t(this),i=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[i](e.data("ujs:enable-with")),e.prop("disabled",!1)})},allowAction:function(t){var e,n=t.data("confirm"),s=!1;return n?(i.fire(t,"confirm")&&(s=i.confirm(n),e=i.fire(t,"confirm:complete",[s])),s&&e):!0},blankInputs:function(e,i,n){var s,o,a=t(),r=i||"input,textarea",l=e.find(r);return l.each(function(){if(s=t(this),o=s.is("input[type=checkbox],input[type=radio]")?s.is(":checked"):s.val(),!o==!n){if(s.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+s.attr("name")+'"]').length)return!0;a=a.add(s)}}),a.length?a:!1},nonBlankInputs:function(t,e){return i.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){t.data("ujs:enable-with",t.html()),t.html(t.data("disable-with")),t.bind("click.railsDisable",function(t){return i.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},i.fire(n,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,n){t.crossDomain||i.CSRFProtection(n)}),n.delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(t(this))}),n.delegate(i.linkClickSelector,"click.rails",function(n){var s=t(this),o=s.data("method"),a=s.data("params");if(!i.allowAction(s))return i.stopEverything(n);if(s.is(i.linkDisableSelector)&&i.disableElement(s),s.data("remote")!==e){if(!(!n.metaKey&&!n.ctrlKey||o&&"GET"!==o||a))return!0;var r=i.handleRemote(s);return r===!1?i.enableElement(s):r.error(function(){i.enableElement(s)}),!1}return s.data("method")?(i.handleMethod(s),!1):void 0}),n.delegate(i.buttonClickSelector,"click.rails",function(e){var n=t(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(e)}),n.delegate(i.inputChangeSelector,"change.rails",function(e){var n=t(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(e)}),n.delegate(i.formSubmitSelector,"submit.rails",function(n){var s=t(this),o=s.data("remote")!==e,a=i.blankInputs(s,i.requiredInputSelector),r=i.nonBlankInputs(s,i.fileInputSelector);if(!i.allowAction(s))return i.stopEverything(n);if(a&&s.attr("novalidate")==e&&i.fire(s,"ajax:aborted:required",[a]))return i.stopEverything(n);if(o){if(r){setTimeout(function(){i.disableFormElements(s)},13);var l=i.fire(s,"ajax:aborted:file",[r]);return l||setTimeout(function(){i.enableFormElements(s)},13),l}return i.handleRemote(s),!1}setTimeout(function(){i.disableFormElements(s)},13)}),n.delegate(i.formInputClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);var s=n.attr("name"),o=s?{name:s,value:n.val()}:null;n.closest("form").data("ujs:submit-button",o)}),n.delegate(i.formSubmitSelector,"ajax:beforeSend.rails",function(e){this==e.target&&i.disableFormElements(t(this))}),n.delegate(i.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&i.enableFormElements(t(this))}),t(function(){var e=t("meta[name=csrf-token]").attr("content"),i=t("meta[name=csrf-param]").attr("content");t('form input[name="'+i+'"]').val(e)}))}(jQuery),function(t,e,i){function n(t){var e={},n=/^jQuery\d+$/;return i.each(t.attributes,function(t,i){i.specified&&!n.test(i.name)&&(e[i.name]=i.value)}),e}function s(t,e){var n=this,s=i(n);if(n.value==s.attr("placeholder")&&s.hasClass("placeholder"))if(s.data("placeholder-password")){if(s=s.hide().next().show().attr("id",s.removeAttr("id").data("placeholder-id")),t===!0)return s[0].value=e;s.focus()}else n.value="",s.removeClass("placeholder"),n==a()&&n.select()}function o(){var t,e=this,o=i(e),a=this.id;if(""==e.value){if("password"==e.type){if(!o.data("placeholder-textinput")){try{t=o.clone().attr({type:"text"})}catch(r){t=i("<input>").attr(i.extend(n(this),{type:"text"}))}t.removeAttr("name").data({"placeholder-password":o,"placeholder-id":a}).bind("focus.placeholder",s),o.data({"placeholder-textinput":t,"placeholder-id":a}).before(t)}o=o.removeAttr("id").hide().prev().attr("id",a).show()}o.addClass("placeholder"),o[0].value=o.attr("placeholder")}else o.removeClass("placeholder")}function a(){try{return e.activeElement}catch(t){}}var r,l,c="[object OperaMini]"==Object.prototype.toString.call(t.operamini),u="placeholder"in e.createElement("input")&&!c,d="placeholder"in e.createElement("textarea")&&!c,h=i.fn,p=i.valHooks,f=i.propHooks;u&&d?(l=h.placeholder=function(){return this},l.input=l.textarea=!0):(l=h.placeholder=function(){var t=this;return t.filter((u?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":s,"blur.placeholder":o}).data("placeholder-enabled",!0).trigger("blur.placeholder"),t},l.input=u,l.textarea=d,r={get:function(t){var e=i(t),n=e.data("placeholder-password");return n?n[0].value:e.data("placeholder-enabled")&&e.hasClass("placeholder")?"":t.value},set:function(t,e){var n=i(t),r=n.data("placeholder-password");return r?r[0].value=e:n.data("placeholder-enabled")?(""==e?(t.value=e,t!=a()&&o.call(t)):n.hasClass("placeholder")?s.call(t,!0,e)||(t.value=e):t.value=e,n):t.value=e}},u||(p.input=r,f.value=r),d||(p.textarea=r,f.value=r),i(function(){i(e).delegate("form","submit.placeholder",function(){var t=i(".placeholder",this).each(s);setTimeout(function(){t.each(o)},10)})}),i(t).bind("beforeunload.placeholder",function(){i(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),/*!
 * typeahead.js 0.10.2
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2014 Twitter, Inc. and other contributors; Licensed MIT
 */
function(t){var e={isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},bind:t.proxy,each:function(e,i){function n(t,e){return i(e,t)}t.each(e,n)},map:t.map,filter:t.grep,every:function(e,i){var n=!0;return e?(t.each(e,function(t,s){return(n=i.call(null,s,t,e))?void 0:!1}),!!n):n},some:function(e,i){var n=!1;return e?(t.each(e,function(t,s){return(n=i.call(null,s,t,e))?!1:void 0}),!!n):n},mixin:t.extend,getUniqueId:function(){var t=0;return function(){return t++}}(),templatify:function(e){function i(){return String(e)}return t.isFunction(e)?e:i},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n,s;return function(){var o,a,r=this,l=arguments;return o=function(){n=null,i||(s=t.apply(r,l))},a=i&&!n,clearTimeout(n),n=setTimeout(o,e),a&&(s=t.apply(r,l)),s}},throttle:function(t,e){var i,n,s,o,a,r;return a=0,r=function(){a=new Date,s=null,o=t.apply(i,n)},function(){var l=new Date,c=e-(l-a);return i=this,n=arguments,0>=c?(clearTimeout(s),s=null,a=l,o=t.apply(i,n)):s||(s=setTimeout(r,c)),o}},noop:function(){}},i="0.10.2",n=function(){function t(t){return t.split(/\s+/)}function e(t){return t.split(/\W+/)}function i(t){return function(e){return function(i){return t(i[e])}}}return{nonword:e,whitespace:t,obj:{nonword:i(e),whitespace:i(t)}}}(),s=function(){function t(t){this.maxSize=t||100,this.size=0,this.hash={},this.list=new i}function i(){this.head=this.tail=null}function n(t,e){this.key=t,this.val=e,this.prev=this.next=null}return e.mixin(t.prototype,{set:function(t,e){var i,s=this.list.tail;this.size>=this.maxSize&&(this.list.remove(s),delete this.hash[s.key]),(i=this.hash[t])?(i.val=e,this.list.moveToFront(i)):(i=new n(t,e),this.list.add(i),this.hash[t]=i,this.size++)},get:function(t){var e=this.hash[t];return e?(this.list.moveToFront(e),e.val):void 0}}),e.mixin(i.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),t}(),o=function(){function t(t){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}function i(){return(new Date).getTime()}function n(t){return JSON.stringify(e.isUndefined(t)?null:t)}function s(t){return JSON.parse(t)}var o,a;try{o=window.localStorage,o.setItem("~~~","!"),o.removeItem("~~~")}catch(r){o=null}return a=o&&window.JSON?{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},get:function(t){return this.isExpired(t)&&this.remove(t),s(o.getItem(this._prefix(t)))},set:function(t,s,a){return e.isNumber(a)?o.setItem(this._ttlKey(t),n(i()+a)):o.removeItem(this._ttlKey(t)),o.setItem(this._prefix(t),n(s))},remove:function(t){return o.removeItem(this._ttlKey(t)),o.removeItem(this._prefix(t)),this},clear:function(){var t,e,i=[],n=o.length;for(t=0;n>t;t++)(e=o.key(t)).match(this.keyMatcher)&&i.push(e.replace(this.keyMatcher,""));for(t=i.length;t--;)this.remove(i[t]);return this},isExpired:function(t){var n=s(o.getItem(this._ttlKey(t)));return e.isNumber(n)&&i()>n?!0:!1}}:{get:e.noop,set:e.noop,remove:e.noop,clear:e.noop,isExpired:e.noop},e.mixin(t.prototype,a),t}(),a=function(){function i(e){e=e||{},this._send=e.transport?n(e.transport):t.ajax,this._get=e.rateLimiter?e.rateLimiter(this._get):this._get}function n(i){return function(n,s){function o(t){e.defer(function(){r.resolve(t)})}function a(t){e.defer(function(){r.reject(t)})}var r=t.Deferred();return i(n,s,o,a),r}}var o=0,a={},r=6,l=new s(10);return i.setMaxPendingRequests=function(t){r=t},i.resetCache=function(){l=new s(10)},e.mixin(i.prototype,{_get:function(t,e,i){function n(e){i&&i(null,e),l.set(t,e)}function s(){i&&i(!0)}function c(){o--,delete a[t],d.onDeckRequestArgs&&(d._get.apply(d,d.onDeckRequestArgs),d.onDeckRequestArgs=null)}var u,d=this;(u=a[t])?u.done(n).fail(s):r>o?(o++,a[t]=this._send(t,e).done(n).fail(s).always(c)):this.onDeckRequestArgs=[].slice.call(arguments,0)},get:function(t,i,n){var s;return e.isFunction(i)&&(n=i,i={}),(s=l.get(t))?e.defer(function(){n&&n(null,s)}):this._get(t,i,n),!!s}}),i}(),r=function(){function i(e){e=e||{},e.datumTokenizer&&e.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=e.datumTokenizer,this.queryTokenizer=e.queryTokenizer,this.reset()}function n(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function s(){return{ids:[],children:{}}}function o(t){for(var e={},i=[],n=0;n<t.length;n++)e[t[n]]||(e[t[n]]=!0,i.push(t[n]));return i}function a(t,e){function i(t,e){return t-e}var n=0,s=0,o=[];for(t=t.sort(i),e=e.sort(i);n<t.length&&s<e.length;)t[n]<e[s]?n++:t[n]>e[s]?s++:(o.push(t[n]),n++,s++);return o}return e.mixin(i.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var i=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var o,a;o=i.datums.push(t)-1,a=n(i.datumTokenizer(t)),e.each(a,function(t){var e,n,a;for(e=i.trie,n=t.split("");a=n.shift();)e=e.children[a]||(e.children[a]=s()),e.ids.push(o)})})},get:function(t){var i,s,r=this;return i=n(this.queryTokenizer(t)),e.each(i,function(t){var e,i,n,o;if(s&&0===s.length)return!1;for(e=r.trie,i=t.split("");e&&(n=i.shift());)e=e.children[n];return e&&0===i.length?(o=e.ids.slice(0),s=s?a(s,o):o,void 0):(s=[],!1)}),s?e.map(o(s),function(t){return r.datums[t]}):[]},reset:function(){this.datums=[],this.trie=s()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),i}(),l=function(){function n(t){return t.local||null}function s(n){var s,o;return o={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(s=n.prefetch||null)&&(s=e.isString(s)?{url:s}:s,s=e.mixin(o,s),s.thumbprint=i+s.thumbprint,s.ajax.type=s.ajax.type||"GET",s.ajax.dataType=s.ajax.dataType||"json",!s.url&&t.error("prefetch requires url to be set")),s}function o(i){function n(t){return function(i){return e.debounce(i,t)}}function s(t){return function(i){return e.throttle(i,t)}}var o,a;return a={url:null,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(o=i.remote||null)&&(o=e.isString(o)?{url:o}:o,o=e.mixin(a,o),o.rateLimiter=/^throttle$/i.test(o.rateLimitBy)?s(o.rateLimitWait):n(o.rateLimitWait),o.ajax.type=o.ajax.type||"GET",o.ajax.dataType=o.ajax.dataType||"json",delete o.rateLimitBy,delete o.rateLimitWait,!o.url&&t.error("remote requires url to be set")),o}return{local:n,prefetch:s,remote:o}}();!function(i){function s(e){e&&(e.local||e.prefetch||e.remote)||t.error("one of local, prefetch, or remote is required"),this.limit=e.limit||5,this.sorter=c(e.sorter),this.dupDetector=e.dupDetector||u,this.local=l.local(e),this.prefetch=l.prefetch(e),this.remote=l.remote(e),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new r({datumTokenizer:e.datumTokenizer,queryTokenizer:e.queryTokenizer}),this.storage=this.cacheKey?new o(this.cacheKey):null}function c(t){function i(e){return e.sort(t)}function n(t){return t}return e.isFunction(t)?i:n}function u(){return!1}var d,h;return d=i.Bloodhound,h={data:"data",protocol:"protocol",thumbprint:"thumbprint"},i.Bloodhound=s,s.noConflict=function(){return i.Bloodhound=d,s},s.tokenizers=n,e.mixin(s.prototype,{_loadPrefetch:function(e){function i(t){o.clear(),o.add(e.filter?e.filter(t):t),o._saveToStorage(o.index.serialize(),e.thumbprint,e.ttl)}var n,s,o=this;return(n=this._readFromStorage(e.thumbprint))?(this.index.bootstrap(n),s=t.Deferred().resolve()):s=t.ajax(e.url,e.ajax).done(i),s},_getFromRemote:function(t,e){function i(t,i){t?e([]):e(o.remote.filter?o.remote.filter(i):i)}var n,s,o=this;return t=t||"",s=encodeURIComponent(t),n=this.remote.replace?this.remote.replace(this.remote.url,t):this.remote.url.replace(this.remote.wildcard,s),this.transport.get(n,this.remote.ajax,i)},_saveToStorage:function(t,e,i){this.storage&&(this.storage.set(h.data,t,i),this.storage.set(h.protocol,location.protocol,i),this.storage.set(h.thumbprint,e,i))},_readFromStorage:function(t){var e,i={};return this.storage&&(i.data=this.storage.get(h.data),i.protocol=this.storage.get(h.protocol),i.thumbprint=this.storage.get(h.thumbprint)),e=i.thumbprint!==t||i.protocol!==location.protocol,i.data&&!e?i.data:null},_initialize:function(){function i(){s.add(e.isFunction(o)?o():o)}var n,s=this,o=this.local;return n=this.prefetch?this._loadPrefetch(this.prefetch):t.Deferred().resolve(),o&&n.done(i),this.transport=this.remote?new a(this.remote):null,this.initPromise=n.promise()},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){this.index.add(t)},get:function(t,i){function n(t){var n=o.slice(0);e.each(t,function(t){var i;return i=e.some(n,function(e){return s.dupDetector(t,e)}),!i&&n.push(t),n.length<s.limit}),i&&i(s.sorter(n))}var s=this,o=[],a=!1;o=this.index.get(t),o=this.sorter(o).slice(0,this.limit),o.length<this.limit&&this.transport&&(a=this._getFromRemote(t,n)),a||(o.length>0||!this.transport)&&i&&i(o)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&a.resetCache()},ttAdapter:function(){return e.bind(this.get,this)}}),s}(this);var c={wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'},u={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},input:{position:"relative",backgroundColor:"transparent"},inputWithNoHint:{position:"relative"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};e.isMsie()&&e.mixin(u.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),e.isMsie()&&e.isMsie()<=7&&e.mixin(u.input,{marginTop:"-1px"});var d=function(){function i(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var n="typeahead:";return e.mixin(i.prototype,{trigger:function(t){var e=[].slice.call(arguments,1);this.$el.trigger(n+t,e)}}),i}(),h=function(){function t(t,e,i,n){var s;if(!i)return this;for(e=e.split(l),i=n?r(i,n):i,this._callbacks=this._callbacks||{};s=e.shift();)this._callbacks[s]=this._callbacks[s]||{sync:[],async:[]},this._callbacks[s][t].push(i);return this}function e(e,i,n){return t.call(this,"async",e,i,n)}function i(e,i,n){return t.call(this,"sync",e,i,n)}function n(t){var e;if(!this._callbacks)return this;for(t=t.split(l);e=t.shift();)delete this._callbacks[e];return this}function s(t){var e,i,n,s,a;if(!this._callbacks)return this;for(t=t.split(l),n=[].slice.call(arguments,1);(e=t.shift())&&(i=this._callbacks[e]);)s=o(i.sync,this,[e].concat(n)),a=o(i.async,this,[e].concat(n)),s()&&c(a);return this}function o(t,e,i){function n(){for(var n,s=0;!n&&s<t.length;s+=1)n=t[s].apply(e,i)===!1;return!n}return n}function a(){var t;return t=window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)}}function r(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var l=/\s+/,c=a();return{onSync:i,onAsync:e,off:n,trigger:s}}(),p=function(t){function i(t,i,n){for(var s,o=[],a=0;a<t.length;a++)o.push(e.escapeRegExChars(t[a]));return s=n?"\\b("+o.join("|")+")\\b":"("+o.join("|")+")",i?new RegExp(s):new RegExp(s,"i")}var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(s){function o(e){var i,n;return(i=r.exec(e.data))&&(wrapperNode=t.createElement(s.tagName),s.className&&(wrapperNode.className=s.className),n=e.splitText(i.index),n.splitText(i[0].length),wrapperNode.appendChild(n.cloneNode(!0)),e.parentNode.replaceChild(wrapperNode,n)),!!i}function a(t,e){for(var i,n=3,s=0;s<t.childNodes.length;s++)i=t.childNodes[s],i.nodeType===n?s+=e(i)?1:0:a(i,e)}var r;s=e.mixin({},n,s),s.node&&s.pattern&&(s.pattern=e.isArray(s.pattern)?s.pattern:[s.pattern],r=i(s.pattern,s.caseSensitive,s.wordsOnly),a(s.node,o))}}(window.document),f=function(){function i(i){var s,o,r,l,c=this;i=i||{},i.input||t.error("input is missing"),s=e.bind(this._onBlur,this),o=e.bind(this._onFocus,this),r=e.bind(this._onKeydown,this),l=e.bind(this._onInput,this),this.$hint=t(i.hint),this.$input=t(i.input).on("blur.tt",s).on("focus.tt",o).on("keydown.tt",r),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop),e.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){a[t.which||t.keyCode]||e.defer(e.bind(c._onInput,c,t))}):this.$input.on("input.tt",l),this.query=this.$input.val(),this.$overflowHelper=n(this.$input)}function n(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function s(t,e){return i.normalizeQuery(t)===i.normalizeQuery(e)}function o(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var a;return a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},i.normalizeQuery=function(t){return(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(i.prototype,h,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(t){var e=a[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(t,e){var i,n,s;switch(t){case"tab":n=this.getHint(),s=this.getInputValue(),i=n&&n!==s&&!o(e);break;case"up":case"down":i=!o(e);break;default:i=!1}i&&e.preventDefault()},_shouldTrigger:function(t,e){var i;switch(t){case"tab":i=!o(e);break;default:i=!0}return i},_checkInputValue:function(){var t,e,i;t=this.getInputValue(),e=s(t,this.query),i=e?this.query.length!==t.length:!1,e?i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query=t)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(t){this.query=t},getInputValue:function(){return this.$input.val()},setInputValue:function(t,e){this.$input.val(t),e?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,i,n;t=this.getInputValue(),e=this.getHint(),i=t!==e&&0===e.indexOf(t),n=""!==t&&i&&!this.hasOverflow(),!n&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,i,n;return t=this.$input.val().length,i=this.$input[0].selectionStart,e.isNumber(i)?i===t:document.selection?(n=document.selection.createRange(),n.moveStart("character",-t),t===n.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),i}(),m=function(){function i(i){i=i||{},i.templates=i.templates||{},i.source||t.error("missing source"),i.name&&!o(i.name)&&t.error("invalid dataset name: "+i.name),this.query=null,this.highlight=!!i.highlight,this.name=i.name||e.getUniqueId(),this.source=i.source,this.displayFn=n(i.display||i.displayKey),this.templates=s(i.templates,this.displayFn),this.$el=t(c.dataset.replace("%CLASS%",this.name))}function n(t){function i(e){return e[t]}return t=t||"value",e.isFunction(t)?t:i}function s(t,i){function n(t){return"<p>"+i(t)+"</p>"}return{empty:t.empty&&e.templatify(t.empty),header:t.header&&e.templatify(t.header),footer:t.footer&&e.templatify(t.footer),suggestion:t.suggestion||n}}function o(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var a="ttDataset",r="ttValue",l="ttDatum";return i.extractDatasetName=function(e){return t(e).data(a)},i.extractValue=function(e){return t(e).data(r)},i.extractDatum=function(e){return t(e).data(l)},e.mixin(i.prototype,h,{_render:function(i,n){function s(){return m.templates.empty({query:i,isEmpty:!0})}function o(){function s(e){var i;return i=t(c.suggestion).append(m.templates.suggestion(e)).data(a,m.name).data(r,m.displayFn(e)).data(l,e),i.children().each(function(){t(this).css(u.suggestionChild)}),i}var o,d;return o=t(c.suggestions).css(u.suggestions),d=e.map(n,s),o.append.apply(o,d),m.highlight&&p({node:o[0],pattern:i}),o}function d(){return m.templates.header({query:i,isEmpty:!f})}function h(){return m.templates.footer({query:i,isEmpty:!f})}if(this.$el){var f,m=this;this.$el.empty(),f=n&&n.length,!f&&this.templates.empty?this.$el.html(s()).prepend(m.templates.header?d():null).append(m.templates.footer?h():null):f&&this.$el.html(o()).prepend(m.templates.header?d():null).append(m.templates.footer?h():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(t){function e(e){i.canceled||t!==i.query||i._render(t,e)}var i=this;this.query=t,this.canceled=!1,this.source(t,e)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),i}(),g=function(){function i(i){var s,o,a,r=this;i=i||{},i.menu||t.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=e.map(i.datasets,n),s=e.bind(this._onSuggestionClick,this),o=e.bind(this._onSuggestionMouseEnter,this),a=e.bind(this._onSuggestionMouseLeave,this),this.$menu=t(i.menu).on("click.tt",".tt-suggestion",s).on("mouseenter.tt",".tt-suggestion",o).on("mouseleave.tt",".tt-suggestion",a),e.each(this.datasets,function(t){r.$menu.append(t.getRoot()),t.onSync("rendered",r._onRendered,r)})}function n(t){return new m(t)}return e.mixin(i.prototype,h,{_onSuggestionClick:function(e){this.trigger("suggestionClicked",t(e.currentTarget))},_onSuggestionMouseEnter:function(e){this._removeCursor(),this._setCursor(t(e.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function t(t){return t.isEmpty()}this.isEmpty=e.every(this.datasets,t),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(t,e){t.first().addClass("tt-cursor"),!e&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(t){var e,i,n,s;if(this.isOpen){if(i=this._getCursor(),e=this._getSuggestions(),this._removeCursor(),n=e.index(i)+t,n=(n+1)%(e.length+1)-1,-1===n)return this.trigger("cursorRemoved"),void 0;-1>n&&(n=e.length-1),this._setCursor(s=e.eq(n)),this._ensureVisible(s)}},_ensureVisible:function(t){var e,i,n,s;e=t.position().top,i=e+t.outerHeight(!0),n=this.$menu.scrollTop(),s=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),0>e?this.$menu.scrollTop(n+e):i>s&&this.$menu.scrollTop(n+(i-s))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(t){this.$menu.css("ltr"===t?u.ltr:u.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(t){var e=null;return t.length&&(e={raw:m.extractDatum(t),value:m.extractValue(t),datasetName:m.extractDatasetName(t)}),e},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(t){function i(e){e.update(t)}e.each(this.datasets,i)},empty:function(){function t(t){t.clear()}e.each(this.datasets,t),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function t(t){t.destroy()}this.$menu.off(".tt"),this.$menu=null,e.each(this.datasets,t)}}),i}(),v=function(){function i(i){var s,o,a;i=i||{},i.input||t.error("missing input"),this.isActivated=!1,this.autoselect=!!i.autoselect,this.minLength=e.isNumber(i.minLength)?i.minLength:1,this.$node=n(i.input,i.withHint),s=this.$node.find(".tt-dropdown-menu"),o=this.$node.find(".tt-input"),a=this.$node.find(".tt-hint"),o.on("blur.tt",function(t){var i,n,a;i=document.activeElement,n=s.is(i),a=s.has(i).length>0,e.isMsie()&&(n||a)&&(t.preventDefault(),t.stopImmediatePropagation(),e.defer(function(){o.focus()}))}),s.on("mousedown.tt",function(t){t.preventDefault()}),this.eventBus=i.eventBus||new d({el:o}),this.dropdown=new g({menu:s,datasets:i.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new f({input:o,hint:a}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function n(e,i){var n,o,r,l;n=t(e),o=t(c.wrapper).css(u.wrapper),r=t(c.dropdown).css(u.dropdown),l=n.clone().css(u.hint).css(s(n)),l.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder").prop("disabled",!0).attr({autocomplete:"off",spellcheck:"false"}),n.data(a,{dir:n.attr("dir"),autocomplete:n.attr("autocomplete"),spellcheck:n.attr("spellcheck"),style:n.attr("style")}),n.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(i?u.input:u.inputWithNoHint);try{!n.attr("dir")&&n.attr("dir","auto")}catch(d){}return n.wrap(o).parent().prepend(i?l:null).append(r)}function s(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function o(t){var i=t.find(".tt-input");e.each(i.data(a),function(t,n){e.isUndefined(t)?i.removeAttr(n):i.attr(n,t)}),i.detach().removeData(a).removeClass("tt-input").insertAfter(t),t.remove()}var a="ttAttrs";return e.mixin(i.prototype,{_onSuggestionClicked:function(t,e){var i;(i=this.dropdown.getDatumForSuggestion(e))&&this._select(i)},_onCursorMoved:function(){var t=this.dropdown.getDatumForCursor();this.input.setInputValue(t.value,!0),this.eventBus.trigger("cursorchanged",t.raw,t.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(t,e){var i,n;i=this.dropdown.getDatumForCursor(),n=this.dropdown.getDatumForTopSuggestion(),i?(this._select(i),e.preventDefault()):this.autoselect&&n&&(this._select(n),e.preventDefault())},_onTabKeyed:function(t,e){var i;(i=this.dropdown.getDatumForCursor())?(this._select(i),e.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(t,e){this.input.clearHintIfInvalid(),e.length>=this.minLength?this.dropdown.update(e):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var t;this.dir!==(t=this.input.getLanguageDirection())&&(this.dir=t,this.$node.css("direction",t),this.dropdown.setLanguageDirection(t))},_updateHint:function(){var t,i,n,s,o,a;t=this.dropdown.getDatumForTopSuggestion(),t&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(i=this.input.getInputValue(),n=f.normalizeQuery(i),s=e.escapeRegExChars(n),o=new RegExp("^(?:"+s+")(.+$)","i"),a=o.exec(t.value),a?this.input.setHint(i+a[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(t){var e,i,n,s;e=this.input.getHint(),i=this.input.getQuery(),n=t||this.input.isCursorAtEnd(),e&&i!==e&&n&&(s=this.dropdown.getDatumForTopSuggestion(),s&&this.input.setInputValue(s.value),this.eventBus.trigger("autocompleted",s.raw,s.datasetName))},_select:function(t){this.input.setQuery(t.value),this.input.setInputValue(t.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",t.raw,t.datasetName),this.dropdown.close(),e.defer(e.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(t){this.isActivated?this.input.setInputValue(t):(this.input.setQuery(t),this.input.setInputValue(t,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),o(this.$node),this.$node=null}}),i}();!function(){var i,n,s;i=t.fn.typeahead,n="ttTypeahead",s={initialize:function(i,s){function o(){var o,a,r=t(this);e.each(s,function(t){t.highlight=!!i.highlight}),a=new v({input:r,eventBus:o=new d({el:r}),withHint:e.isUndefined(i.hint)?!0:!!i.hint,minLength:i.minLength,autoselect:i.autoselect,datasets:s}),r.data(n,a)}return s=e.isArray(s)?s:[].slice.call(arguments,1),i=i||{},this.each(o)},open:function(){function e(){var e,i=t(this);(e=i.data(n))&&e.open()}return this.each(e)},close:function(){function e(){var e,i=t(this);(e=i.data(n))&&e.close()}return this.each(e)},val:function(e){function i(){var i,s=t(this);(i=s.data(n))&&i.setVal(e)}function s(t){var e,i;return(e=t.data(n))&&(i=e.getVal()),i}return arguments.length?this.each(i):s(this.first())},destroy:function(){function e(){var e,i=t(this);(e=i.data(n))&&(e.destroy(),i.removeData(n))}return this.each(e)}},t.fn.typeahead=function(t){return s[t]?s[t].apply(this,[].slice.call(arguments,1)):s.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function(){return t.fn.typeahead=i,this}}()}(window.jQuery),function(t,e){"use strict";var i=t.History=t.History||{},n=t.jQuery;if("undefined"!=typeof i.Adapter)throw new Error("History.js Adapter has already been loaded...");i.Adapter={bind:function(t,e,i){n(t).bind(e,i)},trigger:function(t,e,i){n(t).trigger(e,i)},extractEventData:function(t,i,n){var s=i&&i.originalEvent&&i.originalEvent[t]||n&&n[t]||e;return s},onDomLoad:function(t){n(t)}},"undefined"!=typeof i.init&&i.init()}(window),$("#greeting .close-reveal-div").click(function(){$(".close-reveal-div").parents("#greeting").slideUp(800)}),$(".close-reveal-modal").on("click",function(){$(".dropup").click()}),$(".exploredrop").click(function(){$(this).toggleClass("dropup")}),$(".helpdrop").click(function(){$(this).toggleClass("dropup")}),$(".browse [group]").click(function(){group=$(this).attr("group"),$("section.areas").hide(),$("#metro-"+group).removeClass("hidden").fadeIn()}),$(".tab-btns > a").click(function(t){t.preventDefault(),$(this).siblings().removeClass("selected"),$(this).addClass("selected"),$(".browseareas,#browse #gallery,#browse #answers").hide(),$("section.browse").removeClass("answers").removeClass("gallery").addClass($(this).attr("href").split("#").join("")),$("#browse "+$(this).attr("href")).fadeIn()}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Number.prototype.formatMoney=function(t,e,i){var n=this,t=isNaN(t=Math.abs(t))?2:t,e=void 0==e?".":e,i=void 0==i?",":i,s=0>n?"-":"",o=parseInt(n=Math.abs(+n||0).toFixed(t))+"",a=(a=o.length)>3?a%3:0;return s+(a?o.substr(0,a)+i:"")+o.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+i)+(t?e+Math.abs(n-o).toFixed(t).slice(2):"")};var LATIN_MAP={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Æ:"AE",Ç:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ő:"O",Ø:"O",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ű:"U",Ý:"Y",Þ:"TH",ß:"ss",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",æ:"ae",ç:"c",è:"e",é:"e",ê:"e",ë:"e",ì:"i",í:"i",î:"i",ï:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ő:"o",ø:"o",ù:"u",ú:"u",û:"u",ü:"u",ű:"u",ý:"y",þ:"th",ÿ:"y"},LATIN_SYMBOLS_MAP={"©":"(c)"},GREEK_MAP={α:"a",β:"b",γ:"g",δ:"d",ε:"e",ζ:"z",η:"h",θ:"8",ι:"i",κ:"k",λ:"l",μ:"m",ν:"n",ξ:"3",ο:"o",π:"p",ρ:"r",σ:"s",τ:"t",υ:"y",φ:"f",χ:"x",ψ:"ps",ω:"w",ά:"a",έ:"e",ί:"i",ό:"o",ύ:"y",ή:"h",ώ:"w",ς:"s",ϊ:"i",ΰ:"y",ϋ:"y",ΐ:"i",Α:"A",Β:"B",Γ:"G",Δ:"D",Ε:"E",Ζ:"Z",Η:"H",Θ:"8",Ι:"I",Κ:"K",Λ:"L",Μ:"M",Ν:"N",Ξ:"3",Ο:"O",Π:"P",Ρ:"R",Σ:"S",Τ:"T",Υ:"Y",Φ:"F",Χ:"X",Ψ:"PS",Ω:"W",Ά:"A",Έ:"E",Ί:"I",Ό:"O",Ύ:"Y",Ή:"H",Ώ:"W",Ϊ:"I",Ϋ:"Y"},TURKISH_MAP={ş:"s",Ş:"S",ı:"i",İ:"I",ç:"c",Ç:"C",ü:"u",Ü:"U",ö:"o",Ö:"O",ğ:"g",Ğ:"G"},RUSSIAN_MAP={а:"a",б:"b",в:"v",г:"g",д:"d",е:"e",ё:"yo",ж:"zh",з:"z",и:"i",й:"j",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"h",ц:"c",ч:"ch",ш:"sh",щ:"sh",ъ:"",ы:"y",ь:"",э:"e",ю:"yu",я:"ya",А:"A",Б:"B",В:"V",Г:"G",Д:"D",Е:"E",Ё:"Yo",Ж:"Zh",З:"Z",И:"I",Й:"J",К:"K",Л:"L",М:"M",Н:"N",О:"O",П:"P",Р:"R",С:"S",Т:"T",У:"U",Ф:"F",Х:"H",Ц:"C",Ч:"Ch",Ш:"Sh",Щ:"Sh",Ъ:"",Ы:"Y",Ь:"",Э:"E",Ю:"Yu",Я:"Ya"},UKRAINIAN_MAP={Є:"Ye",І:"I",Ї:"Yi",Ґ:"G",є:"ye",і:"i",ї:"yi",ґ:"g"},CZECH_MAP={č:"c",ď:"d",ě:"e",ň:"n",ř:"r",š:"s",ť:"t",ů:"u",ž:"z",Č:"C",Ď:"D",Ě:"E",Ň:"N",Ř:"R",Š:"S",Ť:"T",Ů:"U",Ž:"Z"},POLISH_MAP={ą:"a",ć:"c",ę:"e",ł:"l",ń:"n",ó:"o",ś:"s",ź:"z",ż:"z",Ą:"A",Ć:"C",Ę:"e",Ł:"L",Ń:"N",Ó:"o",Ś:"S",Ź:"Z",Ż:"Z"},LATVIAN_MAP={ā:"a",č:"c",ē:"e",ģ:"g",ī:"i",ķ:"k",ļ:"l",ņ:"n",š:"s",ū:"u",ž:"z",Ā:"A",Č:"C",Ē:"E",Ģ:"G",Ī:"i",Ķ:"k",Ļ:"L",Ņ:"N",Š:"S",Ū:"u",Ž:"Z"},ALL_DOWNCODE_MAPS=new Array;ALL_DOWNCODE_MAPS[0]=LATIN_MAP,ALL_DOWNCODE_MAPS[1]=LATIN_SYMBOLS_MAP,ALL_DOWNCODE_MAPS[2]=GREEK_MAP,ALL_DOWNCODE_MAPS[3]=TURKISH_MAP,ALL_DOWNCODE_MAPS[4]=RUSSIAN_MAP,ALL_DOWNCODE_MAPS[5]=UKRAINIAN_MAP,ALL_DOWNCODE_MAPS[6]=CZECH_MAP,ALL_DOWNCODE_MAPS[7]=POLISH_MAP,ALL_DOWNCODE_MAPS[8]=LATVIAN_MAP;var Downcoder=new Object;if(Downcoder.Initialize=function(){if(!Downcoder.map){Downcoder.map={},Downcoder.chars="";for(var t in ALL_DOWNCODE_MAPS){var e=ALL_DOWNCODE_MAPS[t];for(var i in e)Downcoder.map[i]=e[i],Downcoder.chars+=i}Downcoder.regex=new RegExp("["+Downcoder.chars+"]|[^"+Downcoder.chars+"]+","g")}},/*

Uniform v1.7.5
Copyright Â© 2009 Josh Pyles / Pixelmatrix Design LLC
http://pixelmatrixdesign.com

Requires jQuery 1.4 or newer

Much thanks to Thomas Reynolds and Buck Wilson for their help and advice on this

Disabling text selection is made possible by Mathias Bynens <http://mathiasbynens.be/>
and his noSelect plugin. <http://github.com/mathiasbynens/noSelect-jQuery-Plugin>

Also, thanks to David Kaneda and Eugene Bond for their contributions to the plugin

License:
MIT License - http://www.opensource.org/licenses/mit-license.php

Enjoy!

*/
function(t){t.uniform={options:{selectClass:"selector",radioClass:"radio",checkboxClass:"checker",fileClass:"uploader",filenameClass:"filename",fileBtnClass:"action",fileDefaultText:"No file selected",fileBtnText:"Choose File",checkedClass:"checked",focusClass:"focus",disabledClass:"disabled",buttonClass:"button",activeClass:"active",hoverClass:"hover",useID:!0,idPrefix:"uniform",resetSelector:!1,autoHide:!0},elements:[]},t.support.selectOpacity=t.browser.msie&&t.browser.version<7?!1:!0,t.fn.uniform=function(e){function i(e){$el=t(e),$el.addClass($el.attr("type")),c(e)}function n(e){t(e).addClass("uniform"),c(e)}function s(i){var n=t(i),s=t("<div>"),o=t("<span>");s.addClass(e.buttonClass),e.useID&&""!=n.attr("id")&&s.attr("id",e.idPrefix+"-"+n.attr("id"));var a;n.is("a")||n.is("button")?a=n.text():(n.is(":submit")||n.is(":reset")||n.is("input[type=button]"))&&(a=n.attr("value")),a=""==a?n.is(":reset")?"Reset":"Submit":a,o.html(a),n.css("opacity",0),n.wrap(s),n.wrap(o),s=n.closest("div"),o=n.closest("span"),n.is(":disabled")&&s.addClass(e.disabledClass),s.bind({"mouseenter.uniform":function(){s.addClass(e.hoverClass)},"mouseleave.uniform":function(){s.removeClass(e.hoverClass),s.removeClass(e.activeClass)},"mousedown.uniform touchbegin.uniform":function(){s.addClass(e.activeClass)},"mouseup.uniform touchend.uniform":function(){s.removeClass(e.activeClass)},"click.uniform touchend.uniform":function(e){if(t(e.target).is("span")||t(e.target).is("div"))if(i[0].dispatchEvent){var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!0),i[0].dispatchEvent(n)}else i[0].click()}}),i.bind({"focus.uniform":function(){s.addClass(e.focusClass)},"blur.uniform":function(){s.removeClass(e.focusClass)}}),t.uniform.noSelect(s),c(i)}function o(i){var n=t(i),s=t("<div />"),o=t("<span />");"none"==!n.css("display")&&e.autoHide&&s.hide(),s.addClass(e.selectClass),e.useID&&""!=i.attr("id")&&s.attr("id",e.idPrefix+"-"+i.attr("id"));var a=i.find(":selected:first");0==a.length&&(a=i.find("option:first")),o.html(a.html()),i.css("opacity",0),i.wrap(s),i.before(o),s=i.parent("div"),o=i.siblings("span"),i.bind({"change.uniform":function(){o.text(i.find(":selected").html()),s.removeClass(e.activeClass)},"focus.uniform":function(){s.addClass(e.focusClass)},"blur.uniform":function(){s.removeClass(e.focusClass),s.removeClass(e.activeClass)},"mousedown.uniform touchbegin.uniform":function(){s.addClass(e.activeClass)},"mouseup.uniform touchend.uniform":function(){s.removeClass(e.activeClass)},"click.uniform touchend.uniform":function(){s.removeClass(e.activeClass)},"mouseenter.uniform":function(){s.addClass(e.hoverClass)},"mouseleave.uniform":function(){s.removeClass(e.hoverClass),s.removeClass(e.activeClass)},"keyup.uniform":function(){o.text(i.find(":selected").html())}}),t(i).attr("disabled")&&s.addClass(e.disabledClass),t.uniform.noSelect(o),c(i)}function a(i){var n=t(i),s=t("<div />"),o=t("<span />");"none"==!n.css("display")&&e.autoHide&&s.hide(),s.addClass(e.checkboxClass),e.useID&&""!=i.attr("id")&&s.attr("id",e.idPrefix+"-"+i.attr("id")),t(i).wrap(s),t(i).wrap(o),o=i.parent(),s=o.parent(),t(i).css("opacity",0).bind({"focus.uniform":function(){s.addClass(e.focusClass)},"blur.uniform":function(){s.removeClass(e.focusClass)},"click.uniform touchend.uniform":function(){t(i).attr("checked")?o.addClass(e.checkedClass):o.removeClass(e.checkedClass)},"mousedown.uniform touchbegin.uniform":function(){s.addClass(e.activeClass)},"mouseup.uniform touchend.uniform":function(){s.removeClass(e.activeClass)},"mouseenter.uniform":function(){s.addClass(e.hoverClass)},"mouseleave.uniform":function(){s.removeClass(e.hoverClass),s.removeClass(e.activeClass)}}),t(i).attr("checked")&&o.addClass(e.checkedClass),t(i).attr("disabled")&&s.addClass(e.disabledClass),c(i)}function r(i){var n=t(i),s=t("<div />"),o=t("<span />");"none"==!n.css("display")&&e.autoHide&&s.hide(),s.addClass(e.radioClass),e.useID&&""!=i.attr("id")&&s.attr("id",e.idPrefix+"-"+i.attr("id")),t(i).wrap(s),t(i).wrap(o),o=i.parent(),s=o.parent(),t(i).css("opacity",0).bind({"focus.uniform":function(){s.addClass(e.focusClass)},"blur.uniform":function(){s.removeClass(e.focusClass)},"click.uniform touchend.uniform":function(){if(t(i).attr("checked")){var n=e.radioClass.split(" ")[0];t("."+n+" span."+e.checkedClass+":has([name='"+t(i).attr("name")+"'])").removeClass(e.checkedClass),o.addClass(e.checkedClass)}else o.removeClass(e.checkedClass)},"mousedown.uniform touchend.uniform":function(){t(i).is(":disabled")||s.addClass(e.activeClass)},"mouseup.uniform touchbegin.uniform":function(){s.removeClass(e.activeClass)},"mouseenter.uniform touchend.uniform":function(){s.addClass(e.hoverClass)},"mouseleave.uniform":function(){s.removeClass(e.hoverClass),s.removeClass(e.activeClass)}}),t(i).attr("checked")&&o.addClass(e.checkedClass),t(i).attr("disabled")&&s.addClass(e.disabledClass),c(i)}function l(i){var n=t(i),s=t("<div />"),o=t("<span>"+e.fileDefaultText+"</span>"),a=t("<span>"+e.fileBtnText+"</span>");if("none"==!n.css("display")&&e.autoHide&&s.hide(),s.addClass(e.fileClass),o.addClass(e.filenameClass),a.addClass(e.fileBtnClass),e.useID&&""!=n.attr("id")&&s.attr("id",e.idPrefix+"-"+n.attr("id")),n.wrap(s),n.after(a),n.after(o),s=n.closest("div"),o=n.siblings("."+e.filenameClass),a=n.siblings("."+e.fileBtnClass),!n.attr("size")){var r=s.width();n.attr("size",r/10)}var l=function(){var t=n.val();""===t?t=e.fileDefaultText:(t=t.split(/[\/\\]+/),t=t[t.length-1]),o.text(t)};l(),n.css("opacity",0).bind({"focus.uniform":function(){s.addClass(e.focusClass)},"blur.uniform":function(){s.removeClass(e.focusClass)},"mousedown.uniform":function(){t(i).is(":disabled")||s.addClass(e.activeClass)},"mouseup.uniform":function(){s.removeClass(e.activeClass)},"mouseenter.uniform":function(){s.addClass(e.hoverClass)},"mouseleave.uniform":function(){s.removeClass(e.hoverClass),s.removeClass(e.activeClass)}}),t.browser.msie?n.bind("click.uniform.ie7",function(){setTimeout(l,0)}):n.bind("change.uniform",l),n.attr("disabled")&&s.addClass(e.disabledClass),t.uniform.noSelect(o),t.uniform.noSelect(a),c(i)}function c(e){e=t(e).get(),e.length>1?t.each(e,function(e,i){t.uniform.elements.push(i)}):t.uniform.elements.push(e)}e=t.extend(t.uniform.options,e);var u=this;return 0!=e.resetSelector&&t(e.resetSelector).mouseup(function(){function e(){t.uniform.update(u)}setTimeout(e,10)}),t.uniform.restore=function(e){void 0==e&&(e=t(t.uniform.elements)),t(e).each(function(){t(this).is(":checkbox")?t(this).unwrap().unwrap():t(this).is("select")?(t(this).siblings("span").remove(),t(this).unwrap()):t(this).is(":radio")?t(this).unwrap().unwrap():t(this).is(":file")?(t(this).siblings("span").remove(),t(this).unwrap()):t(this).is("button, :submit, :reset, a, input[type='button']")&&t(this).unwrap().unwrap(),t(this).unbind(".uniform"),t(this).css("opacity","1");var i=t.inArray(t(e),t.uniform.elements);t.uniform.elements.splice(i,1)})},t.uniform.noSelect=function(e){function i(){return!1}t(e).each(function(){this.onselectstart=this.ondragstart=i,t(this).mousedown(i).css({MozUserSelect:"none"})})},t.uniform.update=function(i){void 0==i&&(i=t(t.uniform.elements)),i=t(i),i.each(function(){var n=t(this);if(n.is("select")){var s=n.siblings("span"),o=n.parent("div");o.removeClass(e.hoverClass+" "+e.focusClass+" "+e.activeClass),s.html(n.find(":selected").html()),n.is(":disabled")?o.addClass(e.disabledClass):o.removeClass(e.disabledClass)}else if(n.is(":checkbox")){var s=n.closest("span"),o=n.closest("div");o.removeClass(e.hoverClass+" "+e.focusClass+" "+e.activeClass),s.removeClass(e.checkedClass),n.is(":checked")&&s.addClass(e.checkedClass),n.is(":disabled")?o.addClass(e.disabledClass):o.removeClass(e.disabledClass)}else if(n.is(":radio")){var s=n.closest("span"),o=n.closest("div");o.removeClass(e.hoverClass+" "+e.focusClass+" "+e.activeClass),s.removeClass(e.checkedClass),n.is(":checked")&&s.addClass(e.checkedClass),n.is(":disabled")?o.addClass(e.disabledClass):o.removeClass(e.disabledClass)}else if(n.is(":file")){var o=n.parent("div"),a=n.siblings(e.filenameClass);btnTag=n.siblings(e.fileBtnClass),o.removeClass(e.hoverClass+" "+e.focusClass+" "+e.activeClass),a.text(n.val()),n.is(":disabled")?o.addClass(e.disabledClass):o.removeClass(e.disabledClass)}else if(n.is(":submit")||n.is(":reset")||n.is("button")||n.is("a")||i.is("input[type=button]")){var o=n.closest("div");o.removeClass(e.hoverClass+" "+e.focusClass+" "+e.activeClass),n.is(":disabled")?o.addClass(e.disabledClass):o.removeClass(e.disabledClass)}})},this.each(function(){if(t.support.selectOpacity){var e=t(this);e.is("select")?1!=e.attr("multiple")&&(void 0==e.attr("size")||e.attr("size")<=1)&&o(e):e.is(":checkbox")?a(e):e.is(":radio")?r(e):e.is(":file")?l(e):e.is(":text, :password, input[type='email']")?i(e):e.is("textarea")?n(e):(e.is("a")||e.is(":submit")||e.is(":reset")||e.is("button")||e.is("input[type=button]"))&&s(e)}})}}(jQuery),function(t){var e={init:function(i){return this.each(function(){e.destroy.call(this),this.opt=t.extend(!0,{},t.fn.raty.defaults,i);var n=t(this),s=["number","readOnly","score","scoreName"];e._callback.call(this,s),this.opt.precision&&e._adjustPrecision.call(this),this.opt.number=e._between(this.opt.number,0,this.opt.numberMax),this.opt.path=this.opt.path||"",this.opt.path&&"/"!==this.opt.path.slice(this.opt.path.length-1,this.opt.path.length)&&(this.opt.path+="/"),this.stars=e._createStars.call(this),this.score=e._createScore.call(this),e._apply.call(this,this.opt.score);var o=this.opt.space?4:0,a=this.opt.width||this.opt.number*this.opt.size+this.opt.number*o;this.opt.cancel&&(this.cancel=e._createCancel.call(this),a+=this.opt.size+o),this.opt.readOnly?e._lock.call(this):(n.css("cursor","pointer"),e._binds.call(this)),this.opt.width!==!1&&n.css("width",a),e._target.call(this,this.opt.score),n.data({settings:this.opt,raty:!0})})},_adjustPrecision:function(){this.opt.targetType="score",this.opt.half=!0},_apply:function(t){t&&t>0&&(t=e._between(t,0,this.opt.number),this.score.val(t)),e._fill.call(this,t),t&&e._roundStars.call(this,t)},_between:function(t,e,i){return Math.min(Math.max(parseFloat(t),e),i)},_binds:function(){this.cancel&&e._bindCancel.call(this),e._bindClick.call(this),e._bindOut.call(this),e._bindOver.call(this)},_bindCancel:function(){e._bindClickCancel.call(this),e._bindOutCancel.call(this),e._bindOverCancel.call(this)},_bindClick:function(){var e=this,i=t(e);e.stars.on("click.raty",function(t){e.score.val(e.opt.half||e.opt.precision?i.data("score"):this.alt),e.opt.click&&e.opt.click.call(e,parseFloat(e.score.val()),t)})},_bindClickCancel:function(){var t=this;t.cancel.on("click.raty",function(e){t.score.removeAttr("value"),t.opt.click&&t.opt.click.call(t,null,e)})},_bindOut:function(){var i=this;t(this).on("mouseleave.raty",function(t){var n=parseFloat(i.score.val())||void 0;e._apply.call(i,n),e._target.call(i,n,t),i.opt.mouseout&&i.opt.mouseout.call(i,n,t)})},_bindOutCancel:function(){var e=this;e.cancel.on("mouseleave.raty",function(i){t(this).attr("src",e.opt.path+e.opt.cancelOff),e.opt.mouseout&&e.opt.mouseout.call(e,e.score.val()||null,i)})},_bindOverCancel:function(){var i=this;i.cancel.on("mouseover.raty",function(n){t(this).attr("src",i.opt.path+i.opt.cancelOn),i.stars.attr("src",i.opt.path+i.opt.starOff),e._target.call(i,null,n),i.opt.mouseover&&i.opt.mouseover.call(i,null)})},_bindOver:function(){var i=this,n=t(i),s=i.opt.half?"mousemove.raty":"mouseover.raty";i.stars.on(s,function(s){var o=parseInt(this.alt,10);if(i.opt.half){var a=parseFloat((s.pageX-t(this).offset().left)/i.opt.size),r=a>.5?1:.5;o=o-1+r,e._fill.call(i,o),i.opt.precision&&(o=o-r+a),e._roundStars.call(i,o),n.data("score",o)}else e._fill.call(i,o);e._target.call(i,o,s),i.opt.mouseover&&i.opt.mouseover.call(i,o,s)})},_callback:function(t){for(i in t)"function"==typeof this.opt[t[i]]&&(this.opt[t[i]]=this.opt[t[i]].call(this))},_createCancel:function(){var e=t(this),i=this.opt.path+this.opt.cancelOff,n=t("<img />",{src:i,alt:"x",title:this.opt.cancelHint,"class":"raty-cancel"});return"left"==this.opt.cancelPlace?e.prepend("&#160;").prepend(n):e.append("&#160;").append(n),n},_createScore:function(){return t("<input />",{type:"hidden",name:this.opt.scoreName}).appendTo(this)},_createStars:function(){for(var i=t(this),n=1;n<=this.opt.number;n++){var s=e._getHint.call(this,n),o=this.opt.score&&this.opt.score>=n?"starOn":"starOff";o=this.opt.path+this.opt[o],t("<img />",{src:o,alt:n,title:s}).appendTo(this),this.opt.space&&i.append(n<this.opt.number?"&#160;":"")}return i.children("img")},_error:function(e){t(this).html(e),t.error(e)},_fill:function(t){for(var e=this,i=0,n=1;n<=e.stars.length;n++){var s=e.stars.eq(n-1),o=e.opt.single?n==t:t>=n;if(e.opt.iconRange&&e.opt.iconRange.length>i){var a=e.opt.iconRange[i],r=a.on||e.opt.starOn,l=a.off||e.opt.starOff,c=o?r:l;n<=a.range&&s.attr("src",e.opt.path+c),n==a.range&&i++}else{var c=o?"starOn":"starOff";s.attr("src",this.opt.path+this.opt[c])}}},_getHint:function(t){var e=this.opt.hints[t-1];return""===e?"":e||t},_lock:function(){var i=parseInt(this.score.val(),10),n=i?e._getHint.call(this,i):this.opt.noRatedMsg;t(this).data("readonly",!0).css("cursor","").attr("title",n),this.score.attr("readonly","readonly"),this.stars.attr("title",n),this.cancel&&this.cancel.hide()},_roundStars:function(t){var e=(t-Math.floor(t)).toFixed(2);if(e>this.opt.round.down){var i="starOn";this.opt.halfShow&&e<this.opt.round.up?i="starHalf":e<this.opt.round.full&&(i="starOff"),this.stars.eq(Math.ceil(t)-1).attr("src",this.opt.path+this.opt[i])}},_target:function(i,n){if(this.opt.target){var s=t(this.opt.target);0===s.length&&e._error.call(this,"Target selector invalid or missing!"),this.opt.targetFormat.indexOf("{score}")<0&&e._error.call(this,'Template "{score}" missing!');var o=n&&"mouseover"==n.type;void 0===i?i=this.opt.targetText:null===i?i=o?this.opt.cancelHint:this.opt.targetText:("hint"==this.opt.targetType?i=e._getHint.call(this,Math.ceil(i)):this.opt.precision&&(i=parseFloat(i).toFixed(1)),o||this.opt.targetKeep||(i=this.opt.targetText)),i&&(i=this.opt.targetFormat.toString().replace("{score}",i)),s.is(":input")?s.val(i):s.html(i)}},_unlock:function(){t(this).data("readonly",!1).css("cursor","pointer").removeAttr("title"),this.score.removeAttr("readonly","readonly");for(var i=0;i<this.opt.number;i++)this.stars.eq(i).attr("title",e._getHint.call(this,i+1));this.cancel&&this.cancel.css("display","")},cancel:function(i){return this.each(function(){t(this).data("readonly")!==!0&&(e[i?"click":"score"].call(this,null),this.score.removeAttr("value"))})},click:function(i){return t(this).each(function(){t(this).data("readonly")!==!0&&(e._apply.call(this,i),this.opt.click||e._error.call(this,'You must add the "click: function(score, evt) { }" callback.'),this.opt.click.call(this,i,{type:"click"}),e._target.call(this,i))})},destroy:function(){return t(this).each(function(){var e=t(this),i=e.data("raw");i?e.off(".raty").empty().css({cursor:i.style.cursor,width:i.style.width}).removeData("readonly"):e.data("raw",e.clone()[0])})},getScore:function(){var e,i=[];return t(this).each(function(){e=this.score.val(),i.push(e?parseFloat(e):void 0)}),i.length>1?i:i[0]},readOnly:function(i){return this.each(function(){var n=t(this);n.data("readonly")!==i&&(i?(n.off(".raty").children("img").off(".raty"),e._lock.call(this)):(e._binds.call(this),e._unlock.call(this)),n.data("readonly",i))})},reload:function(){return e.set.call(this,{})},score:function(){return arguments.length?e.setScore.apply(this,arguments):e.getScore.call(this)},set:function(e){return this.each(function(){var i=t(this),n=i.data("settings"),s=t.extend({},n,e);i.raty(s)})},setScore:function(i){return t(this).each(function(){t(this).data("readonly")!==!0&&(e._apply.call(this,i),e._target.call(this,i))})}};t.fn.raty=function(i){return e[i]?e[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?(t.error("Method "+i+" does not exist!"),void 0):e.init.apply(this,arguments)},t.fn.raty.defaults={cancel:!1,cancelHint:"Cancel this rating!",cancelOff:"cancel-off.png",cancelOn:"cancel-on.png",cancelPlace:"left",click:void 0,half:!1,halfShow:!0,hints:["bad","poor","regular","good","gorgeous"],iconRange:void 0,mouseout:void 0,mouseover:void 0,noRatedMsg:"Not rated yet!",number:5,numberMax:20,path:"",precision:!1,readOnly:!1,round:{down:.25,full:.6,up:.76},score:void 0,scoreName:"score",single:!1,size:16,space:!0,starHalf:"star-half.png",starOff:"star-off.png",starOn:"star-on.png",target:void 0,targetFormat:"{score}",targetKeep:!1,targetText:"",targetType:"hint",width:void 0}}(jQuery),/*
	Masked Input plugin for jQuery
	Copyright (c) 2007-2011 Josh Bush (digitalbush.com)
	Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license) 
	Version: 1.3
*/
function(t){var e=(t.browser.msie?"paste":"input")+".mask",i=void 0!=window.orientation;t.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn"},t.fn.extend({caret:function(t,e){if(0!=this.length){if("number"==typeof t)return e="number"==typeof e?e:t,this.each(function(){if(this.setSelectionRange)this.setSelectionRange(t,e);else if(this.createTextRange){var i=this.createTextRange();i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",t),i.select()}});if(this[0].setSelectionRange)t=this[0].selectionStart,e=this[0].selectionEnd;else if(document.selection&&document.selection.createRange){var i=document.selection.createRange();t=0-i.duplicate().moveStart("character",-1e5),e=t+i.text.length}return{begin:t,end:e}}},unmask:function(){return this.trigger("unmask")},mask:function(n,s){if(!n&&this.length>0){var o=t(this[0]);return o.data(t.mask.dataName)()}s=t.extend({placeholder:"_",completed:null},s);var a=t.mask.definitions,r=[],l=n.length,c=null,u=n.length;return t.each(n.split(""),function(t,e){"?"==e?(u--,l=t):a[e]?(r.push(new RegExp(a[e])),null==c&&(c=r.length-1)):r.push(null)}),this.trigger("unmask").each(function(){function o(t){for(var e=w.val(),i=-1,n=0,o=0;u>n;n++)if(r[n]){for(b[n]=s.placeholder;o++<e.length;){var a=e.charAt(o-1);if(r[n].test(a)){b[n]=a,i=n;break}}if(o>e.length)break}else b[n]==e.charAt(o)&&n!=l&&(o++,i=n);return!t&&l>i+1?(w.val(""),h(0,u)):(t||i+1>=l)&&(d(),t||w.val(w.val().substring(0,i+1))),l?n:c}function d(){return w.val(b.join("")).val()}function h(t,e){for(var i=t;e>i&&u>i;i++)r[i]&&(b[i]=s.placeholder)}function p(t){var e=t.which,i=w.caret();if(t.ctrlKey||t.altKey||t.metaKey||32>e)return!0;if(e){i.end-i.begin!=0&&(h(i.begin,i.end),g(i.begin,i.end-1));var n=y(i.begin-1);if(u>n){var o=String.fromCharCode(e);if(r[n].test(o)){m(n),b[n]=o,d();var a=y(n);w.caret(a),s.completed&&a>=u&&s.completed.call(w)}}return!1}}function f(t){var e=t.which;if(8==e||46==e||i&&127==e){var n=w.caret(),s=n.begin,a=n.end;return a-s==0&&(s=46!=e?v(s):a=y(s-1),a=46==e?y(a):a),h(s,a),g(s,a-1),!1}return 27==e?(w.val(C),w.caret(0,o()),!1):void 0}function m(t){for(var e=t,i=s.placeholder;u>e;e++)if(r[e]){var n=y(e),o=b[e];if(b[e]=i,!(u>n&&r[n].test(o)))break;i=o}}function g(t,e){if(!(0>t)){for(var i=t,n=y(e);u>i;i++)if(r[i]){if(!(u>n&&r[i].test(b[n])))break;b[i]=b[n],b[n]=s.placeholder,n=y(n)}d(),w.caret(Math.max(c,t))}}function v(t){for(;--t>=0&&!r[t];);return t}function y(t){for(;++t<=u&&!r[t];);return t}var w=t(this),b=t.map(n.split(""),function(t){return"?"!=t?a[t]?s.placeholder:t:void 0}),C=w.val();w.data(t.mask.dataName,function(){return t.map(b,function(t,e){return r[e]&&t!=s.placeholder?t:null}).join("")}),w.attr("readonly")||w.one("unmask",function(){w.unbind(".mask").removeData(t.mask.dataName)}).bind("focus.mask",function(){C=w.val();var e=o();d();var i=function(){e==n.length?w.caret(0,e):w.caret(e)};(t.browser.msie?i:function(){setTimeout(i,0)})()}).bind("blur.mask",function(){o(),w.val()!=C&&w.change()}).bind("keydown.mask",f).bind("keypress.mask",p).bind(e,function(){setTimeout(function(){w.caret(o(!0))},0)}),o()})}})}(jQuery),$("body form.navbar-form.navbar-left").submit(function(){if(window.location.origin)var t=window.location.origin;else var t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");var e=JSON.parse(getlatlgn($('input[name="search[city]"]').val()).responseText);if("OK"==e.status){for(var i=0;i<e.results[0].address_components.length;i++)switch(e.results[0].address_components[i].types[0]){case"locality":var n=e.results[0].address_components[i].long_name;break;case"administrative_area_level_1":var s=e.results[0].address_components[i].short_name}var o=e.results[0].geometry.location.lat,a=e.results[0].geometry.location.lng;$('input[name="search[latitude]"]').val(o),$('input[name="search[longitude]"]').val(a),n=n+", "+s,n=URLify(n.replace(",","")).toLowerCase();var r=t+"/"+n+"/"}else r=t+"/find/contractors?keywords=";var l=URLify($('input[name="search[keywords]"]').val().replace(",","")).toLowerCase();l&&(r+=l),$(this).attr("action",r)}),"object"==typeof google&&"object"==typeof google.maps){var service=new google.maps.places.AutocompleteService;$('input[name="search[city]"]').typeahead({hint:!0,highlight:!0},{displayKey:function(t){return"undefined"!=t?t:void 0},source:function(t,e){service.getPlacePredictions({input:t,types:["(cities)"],componentRestrictions:{country:"us"}},function(t,i){i==google.maps.places.PlacesServiceStatus.OK&&e($.map(t,function(t){if("undefined"!=t.description){var e=t.description.split(",");return e.pop(),e=e.join(",")}}))})}}).off("blur")}jQuery(function(t){"undefined"!=typeof google&&"undefined"!=typeof google.maps&&(t("#map_where_they_work").length>0?t(document).ready(function(){function e(){var e,e,i={zoom:7,center:new google.maps.LatLng(t("#map_where_they_work").data("contractor-lat"),t("#map_where_they_work").data("contractor-lng")),sensor:!0,mapTypeControl:!1,rotateControlOptions:!1,panControl:!1,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP},n=new google.maps.Map(document.getElementById("map_where_they_work"),i),s={center:new google.maps.LatLng(t("#map_where_they_work").data("contractor-lat"),t("#map_where_they_work").data("contractor-lng"))},o=t("#map_where_they_work").data("contractor-radius");if(!o)var o=50;var a={strokeColor:"#FF0000",strokeOpacity:0,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:n,center:s.center,radius:1609.344*o};e=new google.maps.Circle(a)}google.maps.event.addDomListener(window,"load",e)}):t(document).ready(function(){function e(){var e=new google.maps.LatLngBounds,n={sensor:!0,mapTypeControl:!1,rotateControlOptions:!1,panControl:!1,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP},s=new google.maps.InfoWindow({disableAutoPan:!1,maxWidth:168}),o=new google.maps.Map(document.getElementById("map"),n),a=0;google.maps.event.addListener(o,"zoom_changed",function(){21==o.getZoom()&&1==a&&o.setZoom(12),a+=1});var r=[];t.ajax({url:"/api/v1/contractor/"+t("#map").data("contractor-id")+"/building_permits",async:!1,dataType:"json",success:function(t){for(var n=0;n<t.length;++n){var a=(t[n],new google.maps.LatLng(t[n].latitude,t[n].longitude));e.extend(a);var l=new google.maps.Marker({position:a});i(l,o,s,t[n].latitude,t[n].longitude),r.push(l),o.fitBounds(e)}}});{var l=google.maps.event.addListener(o,"bounds_changed",function(){google.maps.event.removeListener(l)});new MarkerClusterer(o,r)}}function i(e,i,s,o,a){google.maps.event.addListener(e,"click",function(){var i=o;t.ajax({url:"/api/v1/building_permits/"+i+"/"+a+"/"+t("#map").data("contractor-id"),async:!1,success:function(t){var i=new google.maps.StreetViewService;i.getPanoramaByLocation(e.position,50,n),s.setContent(t),s.open(e.get("map"),e)}})})}function n(e,i){i!=google.maps.StreetViewStatus.OK&&t(".infoBox .street").addClass("nologo")}google.maps.event.addDomListener(window,"load",e)}))}),$(".col-xs-4.building_permit").on("click","button.load-more",function(){var t=$(this).data("offset"),e=$("#map").data("contractor-id");$.ajax({url:"/api/v1/building_permits/contractor",data:{contractor_id:e,offset:t},dataType:"html",success:function(e){if(t<$("button.load-more").data("total-permits")){t+=200,$("button.load-more").attr("data-offset",t);var i=$("button.load-more");$("button.load-more").remove(),$(".col-xs-4.building_permit").append(e).append(i)}else $("button.load-more").remove(),$(".col-xs-4.building_permit").append(e)}})}),$(".call_contractor").click(function(){$.ajax({url:"/api/v1/conferences",data:{admin_phone_number:$('[name="call_contractor"]').val(),contractor_id:$(this).data("contractor-id")},dataType:"html",success:function(){}})}),$(".permit_description a").click(function(){$(this).parent().next().show(),$(this).parent().remove()}),$(".widget#projects .item").first().addClass("active"),$("input#test").val("all_clear"),$(".profile-tooltip").click(function(t){t.preventDefault()}),$("#license-tooltip").length&&($("#license-tooltip").tooltip({title:"In most states, a contractor is required to be licensed to perform any significant remodeling or construction work.  The license ensures they have fulfilled certain requirements to practice and ensures that consumers have recourse if something goes wrong."}),$("#licensed-badge").parent().tooltip({title:"In most states, a contractor is required to be licensed to perform any significant remodeling or construction work.  The license ensures they have fulfilled certain requirements to practice and ensures that consumers have recourse if something goes wrong.",placement:"left"})),$("#bond-tooltip").length&&($("#bond-tooltip").tooltip({title:"A bond is filed in case you need to claim damages as a result of defective remodeling or construction work by your contractor.  Bond claims are filed with the surety company that provided the bond."}),$("#bonded-badge").parent().tooltip({title:"A bond is filed in case you need to claim damages as a result of defective remodeling or construction work by your contractor.  Bond claims are filed with the surety company that provided the bond."})),$("#insurance-tooltip").length&&($("#insurance-tooltip").tooltip({title:"Workers compensation insurance covers employees who are injured on the job.  It is a requirement in many states (e.g. California)."}),$("#insured-badge").parent().tooltip({title:"Workers compensation insurance covers employees who are injured on the job.  It is a requirement in many states (e.g. California).",placement:"left"})),jQuery(function(t){var e=!1;t(".notes-overlay .close-tab").click(function(){e?t(".notes,.notes-overlay").animate({left:-420},300,function(){e=!1}):t(".notes,.notes-overlay").animate({left:0},300,function(){e=!0})}),t(".notes .btn").click(function(){s_append_dt="",s_append_dt=t("[name=dp_followup]").val(),s_notes=t(".notes textarea").val(),i_importance=t(".notes [name=rdo_importance]:checked").val(),""!=s_append_dt&&(s_append_dt+=" &bull; "),o_data={i_nid:t("meta[name=nid]").attr("content"),s_business:t("meta[name=business]").attr("content"),s_notes:s_notes,i_importance:i_importance},t("[name=dp_followup]").val().length&&(o_data.t_due=t("[name=dp_followup]").val()),t("[name=ddn_assign]").val().length&&(o_data.i_assign=t("[name=ddn_assign]").val()),s_now=(new Date).getMonth()+1,s_now=s_now+"/"+(new Date).getDate(),s_now=s_now+"/"+(new Date).getFullYear(),t.ajax({url:"/api/v1/followups",type:"POST",data:o_data,dataType:"json",success:function(e){var i=t("#note_blank").clone();i.attr("id","note_"+e.note.i_id),i.find(".delete-note").attr("data-id",e.note.i_id),i.find(".t_added").html(s_now),i.find(".s_email").html(" &middot; "+e.note.s_email),i.find(".s_notes").html(e.note.s_notes.split("\n\r").join("<br>")),t(".notes").append(i),t(".notes textarea").val("")}})}),t(".delete-note").click(function(){i_id=t(this).attr("data-id"),t.ajax({url:"/api/v1/followups/"+i_id,type:"POST",data:{_method:"DELETE",i_id:i_id},success:function(){}}),t(this).parents(".note-container:first").remove()})}),$(document).ready(function(){
	if($(".rating-static").each(function(){$(this).html(""),$(this).raty({readOnly:!0,showHalf:!1,hints:["Terrible","Poor","Average","Very Good","Highly Recommended"],noRatedMsg:"",score:function(){return $(this).attr("value")},path:"//d3flf7kkefqaeh.cloudfront.net/_assets/raty/"})}),$(".reviews_index").length>0){{$(location).attr("href")}$("tr.review .btn-group .btn").click(function(){$(this).parents("tr").hide()}),$(".review .btns .btn").click(function(){var t=$(".active .count").text(),e=t-1;$(".count").text(e)}),$(".edit_review_form .btn-cancel").click(function(t){return $(this).parents(".edit_review_form").prev(".review_body").show(),$(this).parents(".edit_review_form").hide(),t.preventDefault(),!1}),$(".review_body").click(function(t){return $(this).hide(),$(this).next(".edit_review_form").show(),$(this).next(".edit_review_form").removeClass("hide"),t.preventDefault(),!1})}$(".rating-dynamic").length>0&&($(".rating-dynamic.new").each(function(){$(this).html(""),$(this).raty({readOnly:!1,showHalf:!1,target:"#hint",targetKeep:!0,targetText:"    click stars to rate >",hints:["Poor","Average","Good","Very Good","Highly Recommended"],scoreName:function(){return"score"},path:"//d3flf7kkefqaeh.cloudfront.net/_assets/raty/",click:function(t){$(this).data("value",t)}})}),$(".rating-dynamic.edit").each(function(){$(this).html(""),$(this).raty({readOnly:!1,showHalf:!1,score:function(){return $(this).data("value")},path:"//d3flf7kkefqaeh.cloudfront.net/_assets/raty/",click:function(t){var e={stars:t};$.ajax({type:"PUT",url:"/reviews"+$(this).attr("data-id")+"/modify_stars",data:e,dataType:"json"})}})})),$(".btn-group a.btn").hasClass("active")&&$(".btn-group a.btn.active").children(".count").show()}),!function(t){
	"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper"],t):(window.blueimp=window.blueimp||{},
		window.blueimp.Gallery=t(window.blueimp.helper||window.jQuery))}(function(t){"use strict";
		function e(t,i){
			return t&&t.length&&void 0!==document.body.style.maxHeight?this&&this.options===e.prototype.options?(this.list=t,this.num=t.length,this.initOptions(i),this.initialize(),void 0):new e(t,i):!1}
			return t.extend(e.prototype,{options:{container:"#blueimp-gallery",slidesContainer:"div",titleElement:"h3",displayClass:"blueimp-gallery-display",controlsClass:"blueimp-gallery-controls",singleClass:"blueimp-gallery-single",leftEdgeClass:"blueimp-gallery-left",rightEdgeClass:"blueimp-gallery-right",playingClass:"blueimp-gallery-playing",slideClass:"slide",slideLoadingClass:"slide-loading",slideErrorClass:"slide-error",slideContentClass:"slide-content",toggleClass:"toggle",prevClass:"prev",nextClass:"next",closeClass:"close",playPauseClass:"play-pause",typeProperty:"type",titleProperty:"title",urlProperty:"href",displayTransition:!0,clearSlides:!0,stretchImages:!1,toggleControlsOnReturn:!0,toggleSlideshowOnSpace:!0,enableKeyboardNavigation:!0,closeOnEscape:!0,closeOnSlideClick:!0,closeOnSwipeUpOrDown:!0,emulateTouchEvents:!0,hidePageScrollbars:!0,disableScroll:!0,carousel:!1,continuous:!0,unloadElements:!0,startSlideshow:!1,slideshowInterval:5e3,index:0,preloadRange:2,transitionSpeed:400,slideshowTransitionSpeed:void 0,event:void 0,onopen:void 0,onopened:void 0,onslide:void 0,onslideend:void 0,onslidecomplete:void 0,onclose:void 0,onclosed:void 0},carouselOptions:{hidePageScrollbars:!1,toggleControlsOnReturn:!1,toggleSlideshowOnSpace:!1,enableKeyboardNavigation:!1,closeOnEscape:!1,closeOnSlideClick:!1,closeOnSwipeUpOrDown:!1,disableScroll:!1,startSlideshow:!0},support:function(e){var i={touch:void 0!==window.ontouchstart||window.DocumentTouch&&document instanceof DocumentTouch},n={webkitTransition:{end:"webkitTransitionEnd",prefix:"-webkit-"},MozTransition:{end:"transitionend",prefix:"-moz-"},OTransition:{end:"otransitionend",prefix:"-o-"},transition:{end:"transitionend",prefix:""}},s=function(){var t,n,s=i.transition;document.body.appendChild(e),s&&(t=s.name.slice(0,-9)+"ransform",void 0!==e.style[t]&&(e.style[t]="translateZ(0)",n=window.getComputedStyle(e).getPropertyValue(s.prefix+"transform"),i.transform={prefix:s.prefix,name:t,translate:!0,translateZ:!!n&&"none"!==n})),void 0!==e.style.backgroundSize&&(i.backgroundSize={},e.style.backgroundSize="contain",i.backgroundSize.contain="contain"===window.getComputedStyle(e).getPropertyValue("background-size"),e.style.backgroundSize="cover",i.backgroundSize.cover="cover"===window.getComputedStyle(e).getPropertyValue("background-size")),document.body.removeChild(e)};return function(t,i){var n;for(n in i)if(i.hasOwnProperty(n)&&void 0!==e.style[n]){t.transition=i[n],t.transition.name=n;break}}(i,n),document.body?s():t(document).on("DOMContentLoaded",s),i}(document.createElement("div")),requestAnimationFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,initialize:function(){return this.initStartIndex(),this.initWidget()===!1?!1:(this.initEventListeners(),this.onslide(this.index),this.ontransitionend(),this.options.startSlideshow&&this.play(),void 0)},slide:function(t,e){window.clearTimeout(this.timeout);var i,n,s,o=this.index;if(o!==t&&1!==this.num){if(e||(e=this.options.transitionSpeed),this.support.transition){for(this.options.continuous||(t=this.circle(t)),i=Math.abs(o-t)/(o-t),this.options.continuous&&(n=i,i=-this.positions[this.circle(t)]/this.slideWidth,i!==n&&(t=-i*this.num+t)),s=Math.abs(o-t)-1;s;)s-=1,this.move(this.circle((t>o?t:o)-s-1),this.slideWidth*i,0);t=this.circle(t),this.move(o,this.slideWidth*i,e),this.move(t,0,e),this.options.continuous&&this.move(this.circle(t-i),-(this.slideWidth*i),0)}else t=this.circle(t),this.animate(o*-this.slideWidth,t*-this.slideWidth,e);this.onslide(t)}},getIndex:function(){return this.index},getNumber:function(){return this.num},prev:function(){(this.options.continuous||this.index)&&this.slide(this.index-1)},next:function(){(this.options.continuous||this.index<this.num-1)&&this.slide(this.index+1)},play:function(t){var e=this;window.clearTimeout(this.timeout),this.interval=t||this.options.slideshowInterval,this.elements[this.index]>1&&(this.timeout=this.setTimeout(!this.requestAnimationFrame&&this.slide||function(t,i){e.animationFrameId=e.requestAnimationFrame.call(window,function(){e.slide(t,i)})},[this.index+1,this.options.slideshowTransitionSpeed],this.interval)),this.container.addClass(this.options.playingClass)},pause:function(){window.clearTimeout(this.timeout),this.interval=null,this.container.removeClass(this.options.playingClass)},add:function(t){var e;for(t.concat||(t=Array.prototype.slice.call(t)),this.list.concat||(this.list=Array.prototype.slice.call(this.list)),this.list=this.list.concat(t),this.num=this.list.length,this.num>2&&null===this.options.continuous&&(this.options.continuous=!0,this.container.removeClass(this.options.leftEdgeClass)),this.container.removeClass(this.options.rightEdgeClass).removeClass(this.options.singleClass),e=this.num-t.length;e<this.num;e+=1)this.addSlide(e),this.positionSlide(e);this.positions.length=this.num,this.initSlides(!0)},resetSlides:function(){this.slidesContainer.empty(),this.slides=[]},handleClose:function(){var t=this.options;this.destroyEventListeners(),this.pause(),this.container[0].style.display="none",this.container.removeClass(t.displayClass).removeClass(t.singleClass).removeClass(t.leftEdgeClass).removeClass(t.rightEdgeClass),t.hidePageScrollbars&&(document.body.style.overflow=this.bodyOverflowStyle),this.options.clearSlides&&this.resetSlides(),this.options.onclosed&&this.options.onclosed.call(this)},close:function(){var t=this,e=function(i){i.target===t.container[0]&&(t.container.off(t.support.transition.end,e),t.handleClose())};this.options.onclose&&this.options.onclose.call(this),this.support.transition&&this.options.displayTransition?(this.container.on(this.support.transition.end,e),this.container.removeClass(this.options.displayClass)):this.handleClose()},circle:function(t){return(this.num+t%this.num)%this.num},move:function(t,e,i){this.translateX(t,e,i),this.positions[t]=e},translate:function(t,e,i,n){var s=this.slides[t].style,o=this.support.transition,a=this.support.transform;s[o.name+"Duration"]=n+"ms",s[a.name]="translate("+e+"px, "+i+"px)"+(a.translateZ?" translateZ(0)":"")},translateX:function(t,e,i){this.translate(t,e,0,i)},translateY:function(t,e,i){this.translate(t,0,e,i)},animate:function(t,e,i){if(!i)return this.slidesContainer[0].style.left=e+"px",void 0;var n=this,s=(new Date).getTime(),o=window.setInterval(function(){var a=(new Date).getTime()-s;return a>i?(n.slidesContainer[0].style.left=e+"px",n.ontransitionend(),window.clearInterval(o),void 0):(n.slidesContainer[0].style.left=(e-t)*(Math.floor(100*(a/i))/100)+t+"px",void 0)},4)},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},onresize:function(){this.initSlides(!0)},onmousedown:function(t){t.which&&1===t.which&&"VIDEO"!==t.target.nodeName&&((t.originalEvent||t).touches=[{pageX:t.pageX,pageY:t.pageY}],this.ontouchstart(t))},onmousemove:function(t){this.touchStart&&((t.originalEvent||t).touches=[{pageX:t.pageX,pageY:t.pageY}],this.ontouchmove(t))},onmouseup:function(t){this.touchStart&&(this.ontouchend(t),delete this.touchStart)},onmouseout:function(e){if(this.touchStart){var i=e.target,n=e.relatedTarget;(!n||n!==i&&!t.contains(i,n))&&this.onmouseup(e)}},ontouchstart:function(t){var e=(t.originalEvent||t).touches[0];this.touchStart={x:e.pageX,y:e.pageY,time:Date.now()},this.isScrolling=void 0,this.touchDelta={}},ontouchmove:function(t){var e,i,n=(t.originalEvent||t).touches[0],s=(t.originalEvent||t).scale,o=this.index;if(!(n.length>1||s&&1!==s))if(this.options.disableScroll&&t.preventDefault(),this.touchDelta={x:n.pageX-this.touchStart.x,y:n.pageY-this.touchStart.y},e=this.touchDelta.x,void 0===this.isScrolling&&(this.isScrolling=this.isScrolling||Math.abs(e)<Math.abs(this.touchDelta.y)),this.isScrolling)this.options.closeOnSwipeUpOrDown&&this.translateY(o,this.touchDelta.y+this.positions[o],0);else for(t.preventDefault(),window.clearTimeout(this.timeout),this.options.continuous?i=[this.circle(o+1),o,this.circle(o-1)]:(this.touchDelta.x=e/=!o&&e>0||o===this.num-1&&0>e?Math.abs(e)/this.slideWidth+1:1,i=[o],o&&i.push(o-1),o<this.num-1&&i.unshift(o+1));i.length;)o=i.pop(),this.translateX(o,e+this.positions[o],0)},ontouchend:function(){var t,e,i,n,s,o=this.index,a=this.options.transitionSpeed,r=this.slideWidth,l=Number(Date.now()-this.touchStart.time)<250,c=l&&Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.x)>r/2,u=!o&&this.touchDelta.x>0||o===this.num-1&&this.touchDelta.x<0,d=!c&&this.options.closeOnSwipeUpOrDown&&(l&&Math.abs(this.touchDelta.y)>20||Math.abs(this.touchDelta.y)>this.slideHeight/2);this.options.continuous&&(u=!1),t=this.touchDelta.x<0?-1:1,this.isScrolling?d?this.close():this.translateY(o,0,a):c&&!u?(e=o+t,i=o-t,n=r*t,s=-r*t,this.options.continuous?(this.move(this.circle(e),n,0),this.move(this.circle(o-2*t),s,0)):e>=0&&e<this.num&&this.move(e,n,0),this.move(o,this.positions[o]+n,a),this.move(this.circle(i),this.positions[this.circle(i)]+n,a),o=this.circle(i),this.onslide(o)):this.options.continuous?(this.move(this.circle(o-1),-r,a),this.move(o,0,a),this.move(this.circle(o+1),r,a)):(o&&this.move(o-1,-r,a),this.move(o,0,a),o<this.num-1&&this.move(o+1,r,a))},ontransitionend:function(t){var e=this.slides[this.index];t&&e!==t.target||(this.interval&&this.play(),this.setTimeout(this.options.onslideend,[this.index,e]))},oncomplete:function(e){var i,n=e.target||e.srcElement,s=n&&n.parentNode;n&&s&&(i=this.getNodeIndex(s),t(s).removeClass(this.options.slideLoadingClass),"error"===e.type?(t(s).addClass(this.options.slideErrorClass),this.elements[i]=3):this.elements[i]=2,n.clientHeight>this.container[0].clientHeight&&(n.style.maxHeight=this.container[0].clientHeight),this.interval&&this.slides[this.index]===s&&this.play(),this.setTimeout(this.options.onslidecomplete,[i,s]))},onload:function(t){this.oncomplete(t)},onerror:function(t){this.oncomplete(t)},onkeydown:function(t){switch(t.which||t.keyCode){case 13:this.options.toggleControlsOnReturn&&(this.preventDefault(t),this.toggleControls());break;case 27:this.options.closeOnEscape&&this.close();break;case 32:this.options.toggleSlideshowOnSpace&&(this.preventDefault(t),this.toggleSlideshow());break;case 37:this.options.enableKeyboardNavigation&&(this.preventDefault(t),this.prev());break;case 39:this.options.enableKeyboardNavigation&&(this.preventDefault(t),this.next())}},handleClick:function(e){var i=this.options,n=e.target||e.srcElement,s=n.parentNode,o=function(e){return t(n).hasClass(e)||t(s).hasClass(e)};s===this.slidesContainer[0]?(this.preventDefault(e),i.closeOnSlideClick?this.close():this.toggleControls()):s.parentNode&&s.parentNode===this.slidesContainer[0]?(this.preventDefault(e),this.toggleControls()):o(i.toggleClass)?(this.preventDefault(e),this.toggleControls()):o(i.prevClass)?(this.preventDefault(e),this.prev()):o(i.nextClass)?(this.preventDefault(e),this.next()):o(i.closeClass)?(this.preventDefault(e),this.close()):o(i.playPauseClass)&&(this.preventDefault(e),this.toggleSlideshow())},onclick:function(t){return this.options.emulateTouchEvents&&this.touchDelta&&(Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.y)>20)?(delete this.touchDelta,void 0):this.handleClick(t)},updateEdgeClasses:function(t){t?this.container.removeClass(this.options.leftEdgeClass):this.container.addClass(this.options.leftEdgeClass),t===this.num-1?this.container.addClass(this.options.rightEdgeClass):this.container.removeClass(this.options.rightEdgeClass)},handleSlide:function(t){this.options.continuous||this.updateEdgeClasses(t),this.loadElements(t),this.options.unloadElements&&this.unloadElements(t),this.setTitle(t)},onslide:function(t){this.index=t,this.handleSlide(t),this.setTimeout(this.options.onslide,[t,this.slides[t]])},setTitle:function(t){var e=this.slides[t].firstChild.title,i=this.titleElement;i.length&&(this.titleElement.empty(),e&&i[0].appendChild(document.createTextNode(e)))},setTimeout:function(t,e,i){var n=this;return t&&window.setTimeout(function(){t.apply(n,e||[])},i||0)},imageFactory:function(e,i){var n,s,o,a=this,r=this.imagePrototype.cloneNode(!1),l=e,c=this.options.stretchImages,u=function(e){if(!n){if(e={type:e.type,target:s},!s.parentNode)return a.setTimeout(u,[e]);n=!0,t(r).off("load error",u),c&&"load"===e.type&&(s.style.background='url("'+l+'") center no-repeat',s.style.backgroundSize=c),i(e)}};return"string"!=typeof l&&(l=this.getItemProperty(e,this.options.urlProperty),o=this.getItemProperty(e,this.options.titleProperty)),c===!0&&(c="contain"),c=this.support.backgroundSize&&this.support.backgroundSize[c]&&c,c?s=this.elementPrototype.cloneNode(!1):(s=r,r.draggable=!1),o&&(s.title=o),t(r).on("load error",u),r.src=l,s},createElement:function(e,i){var n=e&&this.getItemProperty(e,this.options.typeProperty),s=n&&this[n.split("/")[0]+"Factory"]||this.imageFactory,o=e&&s.call(this,e,i);return o||(o=this.elementPrototype.cloneNode(!1),this.setTimeout(i,[{type:"error",target:o}])),t(o).addClass(this.options.slideContentClass),o},loadElement:function(e){this.elements[e]||(this.slides[e].firstChild?this.elements[e]=t(this.slides[e]).hasClass(this.options.slideErrorClass)?3:2:(this.elements[e]=1,t(this.slides[e]).addClass(this.options.slideLoadingClass),this.slides[e].appendChild(this.createElement(this.list[e],this.proxyListener))))},loadElements:function(t){var e,i=Math.min(this.num,2*this.options.preloadRange+1),n=t;for(e=0;i>e;e+=1)n+=e*(0===e%2?-1:1),n=this.circle(n),this.loadElement(n)},unloadElements:function(t){var e,i,n;for(e in this.elements)this.elements.hasOwnProperty(e)&&(n=Math.abs(t-e),n>this.options.preloadRange&&n+this.options.preloadRange<this.num&&(i=this.slides[e],i.removeChild(i.firstChild),delete this.elements[e]))},addSlide:function(t){var e=this.slidePrototype.cloneNode(!1);e.setAttribute("data-index",t),this.slidesContainer[0].appendChild(e),this.slides.push(e)},positionSlide:function(t){var e=this.slides[t];e.style.width=this.slideWidth+"px",this.support.transition&&(e.style.left=t*-this.slideWidth+"px",this.move(t,this.index>t?-this.slideWidth:this.index<t?this.slideWidth:0,0))},initSlides:function(e){var i,n;for(e||(this.positions=[],this.positions.length=this.num,this.elements={},this.imagePrototype=document.createElement("img"),this.elementPrototype=document.createElement("div"),this.slidePrototype=document.createElement("div"),t(this.slidePrototype).addClass(this.options.slideClass),this.slides=this.slidesContainer[0].children,i=this.options.clearSlides||this.slides.length!==this.num),this.slideWidth=this.container[0].offsetWidth,this.slideHeight=this.container[0].offsetHeight,this.slidesContainer[0].style.width=this.num*this.slideWidth+"px",i&&this.resetSlides(),n=0;n<this.num;n+=1)i&&this.addSlide(n),this.positionSlide(n);this.options.continuous&&this.support.transition&&(this.move(this.circle(this.index-1),-this.slideWidth,0),this.move(this.circle(this.index+1),this.slideWidth,0)),this.support.transition||(this.slidesContainer[0].style.left=this.index*-this.slideWidth+"px")},toggleControls:function(){var t=this.options.controlsClass;this.container.hasClass(t)?this.container.removeClass(t):this.container.addClass(t)},toggleSlideshow:function(){this.interval?this.pause():this.play()},getNodeIndex:function(t){return parseInt(t.getAttribute("data-index"),10)},getNestedProperty:function(t,e){return e.replace(/\[(?:'([^']+)'|"([^"]+)"|(\d+))\]|(?:(?:^|\.)([^\.\[]+))/g,function(e,i,n,s,o){var a=o||i||n||s&&parseInt(s,10);e&&t&&(t=t[a])}),t},getDataProperty:function(e,i){if(e.getAttribute){var n=e.getAttribute("data-"+i.replace(/([A-Z])/g,"-$1").toLowerCase());if("string"==typeof n){if(/^(true|false|null|-?\d+(\.\d+)?|\{[\s\S]*\}|\[[\s\S]*\])$/.test(n))try{return t.parseJSON(n)}catch(s){}return n}}},getItemProperty:function(t,e){var i=t[e];return void 0===i&&(i=this.getDataProperty(t,e),void 0===i&&(i=this.getNestedProperty(t,e))),i},initStartIndex:function(){var t,e=this.options.index,i=this.options.urlProperty;if(e&&"number"!=typeof e)for(t=0;t<this.num;t+=1)if(this.list[t]===e||this.getItemProperty(this.list[t],i)===this.getItemProperty(e,i)){e=t;break}this.index=this.circle(parseInt(e,10)||0)},initEventListeners:function(){var e=this,i=this.slidesContainer,n=function(t){var i=e.support.transition&&e.support.transition.end===t.type?"transitionend":t.type;e["on"+i](t)};t(window).on("resize",n),t(document.body).on("keydown",n),this.container.on("click",n),this.support.touch?i.on("touchstart touchmove touchend",n):this.options.emulateTouchEvents&&this.support.transition&&i.on("mousedown mousemove mouseup mouseout",n),this.support.transition&&i.on(this.support.transition.end,n),this.proxyListener=n},destroyEventListeners:function(){var e=this.slidesContainer,i=this.proxyListener;t(window).off("resize",i),t(document.body).off("keydown",i),this.container.off("click",i),this.support.touch?e.off("touchstart touchmove touchend",i):this.options.emulateTouchEvents&&this.support.transition&&e.off("mousedown mousemove mouseup mouseout",i),this.support.transition&&e.off(this.support.transition.end,i)},handleOpen:function(){this.options.onopened&&this.options.onopened.call(this)},initWidget:function(){var e=this,i=function(t){t.target===e.container[0]&&(e.container.off(e.support.transition.end,i),e.handleOpen())};return this.container=t(this.options.container),this.container.length?(this.slidesContainer=this.container.find(this.options.slidesContainer).first(),this.slidesContainer.length?(this.titleElement=this.container.find(this.options.titleElement).first(),1===this.num&&this.container.addClass(this.options.singleClass),this.options.onopen&&this.options.onopen.call(this),this.support.transition&&this.options.displayTransition?this.container.on(this.support.transition.end,i):this.handleOpen(),this.options.hidePageScrollbars&&(this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden"),this.container[0].style.display="block",this.initSlides(),this.container.addClass(this.options.displayClass),void 0):!1):!1},initOptions:function(e){this.options=t.extend({},this.options),(e&&e.carousel||this.options.carousel&&(!e||e.carousel!==!1))&&t.extend(this.options,this.carouselOptions),t.extend(this.options,e),this.num<3&&(this.options.continuous=this.options.continuous?null:!1),this.support.transition||(this.options.emulateTouchEvents=!1),this.options.event&&this.preventDefault(this.options.event)}}),e}),function(t){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(t,e){"use strict";t.extend(e.prototype.options,{fullScreen:!1});var i=e.prototype.initialize,n=e.prototype.handleClose;return t.extend(e.prototype,{getFullScreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement},requestFullScreen:function(t){t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen&&t.mozRequestFullScreen()},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen&&document.mozCancelFullScreen()},initialize:function(){i.call(this),this.options.fullScreen&&!this.getFullScreenElement()&&this.requestFullScreen(this.container[0])},handleClose:function(){this.getFullScreenElement()===this.container[0]&&this.exitFullScreen(),n.call(this)}}),e}),function(t){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)
}(function(t,e){"use strict";t.extend(e.prototype.options,{indicatorContainer:"ol",activeIndicatorClass:"active",thumbnailProperty:"thumbnail",thumbnailIndicators:!0});var i=e.prototype.initSlides,n=e.prototype.addSlide,s=e.prototype.resetSlides,o=e.prototype.handleClick,a=e.prototype.handleSlide,r=e.prototype.handleClose;return t.extend(e.prototype,{createIndicator:function(e){var i,n,s=this.indicatorPrototype.cloneNode(!1),o=this.getItemProperty(e,this.options.titleProperty),a=this.options.thumbnailProperty;return this.options.thumbnailIndicators&&(n=e.getElementsByTagName&&t(e).find("img")[0],n?i=n.src:a&&(i=this.getItemProperty(e,a)),i&&(s.style.backgroundImage='url("'+i+'")')),o&&(s.title=o),s},addIndicator:function(t){if(this.indicatorContainer.length){var e=this.createIndicator(this.list[t]);e.setAttribute("data-index",t),this.indicatorContainer[0].appendChild(e),this.indicators.push(e)}},setActiveIndicator:function(e){this.indicators&&(this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),this.activeIndicator=t(this.indicators[e]),this.activeIndicator.addClass(this.options.activeIndicatorClass))},initSlides:function(t){t||(this.indicatorContainer=this.container.find(this.options.indicatorContainer),this.indicatorContainer.length&&(this.indicatorPrototype=document.createElement("li"),this.indicators=this.indicatorContainer[0].children)),i.call(this,t)},addSlide:function(t){n.call(this,t),this.addIndicator(t)},resetSlides:function(){s.call(this),this.indicatorContainer.empty(),this.indicators=[]},handleClick:function(t){var e=t.target||t.srcElement,i=e.parentNode;if(i===this.indicatorContainer[0])this.preventDefault(t),this.slide(this.getNodeIndex(e));else{if(i.parentNode!==this.indicatorContainer[0])return o.call(this,t);this.preventDefault(t),this.slide(this.getNodeIndex(i))}},handleSlide:function(t){a.call(this,t),this.setActiveIndicator(t)},handleClose:function(){this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),r.call(this)}}),e}),function(t){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(t,e){"use strict";return t.extend(e.prototype.options,{videoContentClass:"video-content",videoLoadingClass:"video-loading",videoPlayingClass:"video-playing",videoPosterProperty:"poster",videoSourcesProperty:"sources"}),e.prototype.videoFactory=function(e,i,n){var s,o,a,r,l,c=this,u=this.options,d=this.elementPrototype.cloneNode(!1),h=t(d),p=[{type:"error",target:d}],f=n||document.createElement("video"),m=this.getItemProperty(e,u.urlProperty),g=this.getItemProperty(e,u.typeProperty),v=this.getItemProperty(e,u.titleProperty),y=this.getItemProperty(e,u.videoPosterProperty),w=this.getItemProperty(e,u.videoSourcesProperty);if(h.addClass(u.videoContentClass),v&&(d.title=v),f.canPlayType)if(m&&g&&f.canPlayType(g))f.src=m;else for(;w&&w.length;)if(o=w.shift(),m=this.getItemProperty(o,u.urlProperty),g=this.getItemProperty(o,u.typeProperty),m&&g&&f.canPlayType(g)){f.src=m;break}return y&&(f.poster=y,s=this.imagePrototype.cloneNode(!1),t(s).addClass(u.toggleClass),s.src=y,s.draggable=!1,d.appendChild(s)),a=document.createElement("a"),a.setAttribute("target","_blank"),n||a.setAttribute("download",v),a.href=m,f.src&&(f.controls=!0,(n||t(f)).on("error",function(){c.setTimeout(i,p)}).on("pause",function(){r=!1,h.removeClass(c.options.videoLoadingClass).removeClass(c.options.videoPlayingClass),l&&c.container.addClass(c.options.controlsClass),c.interval&&c.play()}).on("playing",function(){r=!1,h.removeClass(c.options.videoLoadingClass).addClass(c.options.videoPlayingClass),c.container.hasClass(c.options.controlsClass)?(l=!0,c.container.removeClass(c.options.controlsClass)):l=!1}).on("play",function(){window.clearTimeout(c.timeout),r=!0,h.addClass(c.options.videoLoadingClass)}),t(a).on("click",function(t){c.preventDefault(t),r?f.pause():f.play()}),d.appendChild(n&&n.element||f)),d.appendChild(a),this.setTimeout(i,[{type:"load",target:d}]),d},e}),function(t){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery-video"],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(t,e){"use strict";if(!window.postMessage)return e;t.extend(e.prototype.options,{vimeoVideoIdProperty:"vimeo",vimeoPlayerUrl:"//player.vimeo.com/video/VIDEO_ID?api=1&player_id=PLAYER_ID",vimeoPlayerIdPrefix:"vimeo-player-",vimeoClickToPlay:!0});var i=e.prototype.textFactory||e.prototype.imageFactory,n=function(t,e,i,n){this.url=t,this.videoId=e,this.playerId=i,this.clickToPlay=n,this.element=document.createElement("div"),this.listeners={}},s=0;return t.extend(n.prototype,{canPlayType:function(){return!0},on:function(t,e){return this.listeners[t]=e,this},loadAPI:function(){for(var e,i,n=this,s="//"+("https"===location.protocol?"secure-":"")+"a.vimeocdn.com/js/froogaloop2.min.js",o=document.getElementsByTagName("script"),a=o.length,r=function(){!i&&n.playOnReady&&n.play(),i=!0};a;)if(a-=1,o[a].src===s){e=o[a];break}e||(e=document.createElement("script"),e.src=s),t(e).on("load",r),o[0].parentNode.insertBefore(e,o[0]),/loaded|complete/.test(e.readyState)&&r()},onReady:function(){var t=this;this.ready=!0,this.player.addEvent("play",function(){t.hasPlayed=!0,t.onPlaying()}),this.player.addEvent("pause",function(){t.onPause()}),this.player.addEvent("finish",function(){t.onPause()}),this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){this.listeners.pause(),delete this.playStatus},insertIframe:function(){var t=document.createElement("iframe");t.src=this.url.replace("VIDEO_ID",this.videoId).replace("PLAYER_ID",this.playerId),t.id=this.playerId,this.element.parentNode.replaceChild(t,this.element),this.element=t},play:function(){var t=this;this.playStatus||(this.listeners.play(),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.api("play"):(this.playOnReady=!0,window.$f?this.player||(this.insertIframe(),this.player=$f(this.element),this.player.addEvent("ready",function(){t.onReady()})):this.loadAPI())},pause:function(){this.ready?this.player.api("pause"):this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),t.extend(e.prototype,{VimeoPlayer:n,textFactory:function(t,e){var o=this.getItemProperty(t,this.options.vimeoVideoIdProperty);return o?(s+=1,this.videoFactory(t,e,new n(this.options.vimeoPlayerUrl,o,this.options.vimeoPlayerIdPrefix+s,this.options.vimeoClickToPlay))):i.call(this,t,e)}}),e}),function(t){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery-video"],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(t,e){"use strict";if(!window.postMessage)return e;t.extend(e.prototype.options,{youTubeVideoIdProperty:"youtube",youTubePlayerVars:void 0,youTubeClickToPlay:!0});var i=e.prototype.textFactory||e.prototype.imageFactory,n=function(t,e,i){this.videoId=t,this.playerVars=e,this.clickToPlay=i,this.element=document.createElement("div"),this.listeners={}};return t.extend(n.prototype,{canPlayType:function(){return!0},on:function(t,e){return this.listeners[t]=e,this},loadAPI:function(){var t,e=this,i=window.onYouTubeIframeAPIReady,n="//www.youtube.com/iframe_api",s=document.getElementsByTagName("script"),o=s.length;for(window.onYouTubeIframeAPIReady=function(){i&&i.apply(this),e.playOnReady&&e.play()};o;)if(o-=1,s[o].src===n)return;t=document.createElement("script"),t.src=n,s[0].parentNode.insertBefore(t,s[0])},onReady:function(){this.ready=!0,this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){e.prototype.setTimeout.call(this,this.checkSeek,null,2e3)},checkSeek:function(){(this.stateChange===YT.PlayerState.PAUSED||this.stateChange===YT.PlayerState.ENDED)&&(this.listeners.pause(),delete this.playStatus)},onStateChange:function(t){switch(t.data){case YT.PlayerState.PLAYING:this.hasPlayed=!0,this.onPlaying();break;case YT.PlayerState.PAUSED:case YT.PlayerState.ENDED:this.onPause()}this.stateChange=t.data},onError:function(t){this.listeners.error(t)},play:function(){var t=this;this.playStatus||(this.listeners.play(),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.playVideo():(this.playOnReady=!0,window.YT&&YT.Player?this.player||(this.player=new YT.Player(this.element,{videoId:this.videoId,playerVars:this.playerVars,events:{onReady:function(){t.onReady()},onStateChange:function(e){t.onStateChange(e)},onError:function(e){t.onError(e)}}})):this.loadAPI())},pause:function(){this.ready?this.player.pauseVideo():this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),t.extend(e.prototype,{YouTubePlayer:n,textFactory:function(t,e){var s=this.getItemProperty(t,this.options.youTubeVideoIdProperty);return s?this.videoFactory(t,e,new n(s,this.options.youTubePlayerVars,this.options.youTubeClickToPlay)):i.call(this,t,e)}}),e}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./blueimp-gallery"],t):t(window.jQuery,window.blueimp.Gallery)}(function(t,e){"use strict";t(document).on("click","[data-gallery]",function(i){var n=t(this).data("gallery"),s=t(n),o=s.length&&s||t(e.prototype.options.container),a=t.extend(o.data(),{container:o[0],index:this,event:i,onopen:function(){o.data("gallery",this).trigger("open")},onopened:function(){o.trigger("opened")},onslide:function(){o.trigger("slide",arguments)},onslideend:function(){o.trigger("slideend",arguments)},onslidecomplete:function(){o.trigger("slidecomplete",arguments)},onclose:function(){o.trigger("close")},onclosed:function(){o.trigger("closed").removeData("gallery")}}),r=t('[data-gallery="'+n+'"]');return a.filter&&(r=r.filter(a.filter)),new e(r,a)})}),$(document).ready(function(){function t(){$("#uploadProfileImageModal").modal("hide"),$("#serviceRequestModal").modal("show")}$(".profile_image_wrapper .filepicker_field input").change(function(e){$(".profile_image").html("<div style='width: 160px; height: 160px; background-color: lightgrey; '></div>"),$(".profile_image").spin();var i=e.originalEvent.fpfile,n=$(".profile_image").attr("data-user-id"),s={filename:i.filename,filepicker_slug:i.url,s3_slug:i.key,image_type:"profile",owner_type:"homeowner",owner_id:n};$.ajax({type:"POST",url:"/api/v1/images",data:s,dataType:"json",success:function(e){$(".profile_image").spin(!1),$(".profile_image").html("<img src='"+e.cloudfront_slug+"' alt='user profile image'>"),$("#uploadProfileImageModal").length&&setTimeout(t,1e3)}})}),$("#new_contractor_signup_form input.unclaim").click(function(t){t.preventDefault(),$("#new_contractor_signup_form .button").val("Processing..."),$(this).prop("disabled",!0);var e=$.trim($("#contractor_signup_form_zipcode").val()),i=$.trim($("#contractor_signup_form_business_name").val()),n=$.trim($("#contractor_signup_form_email").val()),s=$.trim($("#contractor_signup_form_phone").val()),o=$.trim($("#contractor_signup_form_password").val()),a={zipcode:e,business_name:i};(i.length<2&&e.length<4||o.length<6||s.length<=1||n.length<5)&&$("form#new_contractor_signup_form").submit(),$.ajax({type:"GET",url:"/api/v1/contractor/find_matches",data:a,dataType:"json",success:function(t){if(t.matches.length>0){$("#possible-match-modal").modal("show");for(var e="",i=0;i<t.matches.length;i++)e+="<input type='radio' name='contractor_id' value='"+t.matches[i].nid+"'>"+t.matches[i].business_name+"<br>";$("#possible-match-modal form#matches").html(e),$("#this-is-my-business").click(function(){var t=$("input[name=contractor_id]:checked","form#matches").val();$("#new_contractor_signup_form input#contractor_signup_form_contractor_id").val(t),$("#new_contractor_signup_form input#contractor_signup_form_claim").val("true"),$("form#new_contractor_signup_form").submit()}),$("#not-my-business").click(function(){$("form#new_contractor_signup_form").submit()})}else $("form#new_contractor_signup_form").submit()},error:function(){console.log("Something went wrong.")}})}),$("form#sign_up_user").bind("ajax:success",function(t,e){e.success?($("#new_session_Modal").modal("hide"),$("#sign_in_button").hide()):$(".flash").html("<div class='alert alert-warning fade in alert-block'>Please try again.</div>")})}),$('body.contractors.show #contractor_answers [data-target="#contractor_answers"]').click(function(){traverse_qa(this)});