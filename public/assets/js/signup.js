function downcode(e){Downcoder.Initialize();var t="",s=e.match(Downcoder.regex);if(s)for(var i=0;i<s.length;i++){if(1==s[i].length){var n=Downcoder.map[s[i]];if(null!=n){t+=n;continue}}t+=s[i]}else t=e;return t}function URLify(e,t){return e=downcode(e),e=e.replace(/[^,\-\w\s]/g,""),e=e.replace(/^\s+|\s+$/g,""),e=e.replace(/[-\s]+/g,"-"),e.substring(0,t)}function changeURL(e,t){t="/"+t;var s=window.location.pathname;if(window.location.origin)var i=window.location.origin;else var i=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");if(-1==s.indexOf(e))s=s+t+e;else{var n="";s=s.split("/");for(var a=0;a<s.length;a++)-1==s[a].indexOf(e)?""!=s[a]&&"undefined"!=s[a]&&(n=n+"/"+s[a]):n=n+t+e;s=n}s=i+s,(!$.browser.msie||$.browser.msie&&$.browser.version>9)&&window.history.pushState("object or string","Buildzoom's Newsfeed",s)}function isURLVariablePresent(e){var t=window.location.pathname,s=t.indexOf(e);return-1==s?!1:!0}function removeElementURL(e){var t=window.location.pathname;if(window.location.origin)var s=window.location.origin;else var s=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");var i="";t=t.split("/");for(var n=0;n<t.length;n++)-1==t[n].indexOf(e)&&""!=t[n]&&"undefined"!=t[n]&&(i=i+"/"+t[n]);t=i,t=s+t,(!$.browser.msie||$.browser.msie&&$.browser.version>9)&&window.history.pushState("object or string","Buildzoom's Newsfeed",t)}function add_profile_image(){$("form.edit_user").submit(),window.jQuery&&$("#uploadProfileImageModal").length>0&&($("#uploadProfileImageModal").modal("hide"),$("#serviceRequestModal").length>0&&$("#serviceRequestModal").modal("show"))}function showLoginModal(){$("#new_session_Modal").modal({show:!0}),$("#new_session_Modal").on("shown.bs.modal",function(){setTimeout(function(){$("input#password").focus(),500})})}function removeLoginModal(){$("#new_session_Modal").modal("hide"),$("#sign_in_button").hide()}!function(e,t){e.rails!==t&&e.error("jquery-ujs has already been loaded!");var s,i=e(document);e.rails=s={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var s=e('meta[name="csrf-token"]').attr("content");s&&t.setRequestHeader("X-CSRF-Token",s)},fire:function(t,s,i){var n=e.Event(s);return t.trigger(n,i),n.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(i){var n,a,o,r,l,c,h,u;if(s.fire(i,"ajax:before")){if(r=i.data("cross-domain"),l=r===t?null:r,c=i.data("with-credentials")||null,h=i.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,i.is("form")){n=i.attr("method"),a=i.attr("action"),o=i.serializeArray();var d=i.data("ujs:submit-button");d&&(o.push(d),i.data("ujs:submit-button",null))}else i.is(s.inputChangeSelector)?(n=i.data("method"),a=i.data("url"),o=i.serialize(),i.data("params")&&(o=o+"&"+i.data("params"))):i.is(s.buttonClickSelector)?(n=i.data("method")||"get",a=i.data("url"),o=i.serialize(),i.data("params")&&(o=o+"&"+i.data("params"))):(n=i.data("method"),a=s.href(i),o=i.data("params")||null);u={type:n||"GET",data:o,dataType:h,beforeSend:function(e,n){return n.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+n.accepts.script),s.fire(i,"ajax:beforeSend",[e,n])},success:function(e,t,s){i.trigger("ajax:success",[e,t,s])},complete:function(e,t){i.trigger("ajax:complete",[e,t])},error:function(e,t,s){i.trigger("ajax:error",[e,t,s])},crossDomain:l},c&&(u.xhrFields={withCredentials:c}),a&&(u.url=a);var f=s.ajax(u);return i.trigger("ajax:send",f),f}return!1},handleMethod:function(i){var n=s.href(i),a=i.data("method"),o=i.attr("target"),r=e("meta[name=csrf-token]").attr("content"),l=e("meta[name=csrf-param]").attr("content"),c=e('<form method="post" action="'+n+'"></form>'),h='<input name="_method" value="'+a+'" type="hidden" />';l!==t&&r!==t&&(h+='<input name="'+l+'" value="'+r+'" type="hidden" />'),o&&c.attr("target",o),c.hide().append(h).appendTo("body"),c.submit()},disableFormElements:function(t){t.find(s.disableSelector).each(function(){var t=e(this),s=t.is("button")?"html":"val";t.data("ujs:enable-with",t[s]()),t[s](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(s.enableSelector).each(function(){var t=e(this),s=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[s](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t,i=e.data("confirm"),n=!1;return i?(s.fire(e,"confirm")&&(n=s.confirm(i),t=s.fire(e,"confirm:complete",[n])),n&&t):!0},blankInputs:function(t,s,i){var n,a,o=e(),r=s||"input,textarea",l=t.find(r);return l.each(function(){if(n=e(this),a=n.is("input[type=checkbox],input[type=radio]")?n.is(":checked"):n.val(),!a==!i){if(n.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+n.attr("name")+'"]').length)return!0;o=o.add(n)}}),o.length?o:!1},nonBlankInputs:function(e,t){return s.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return s.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},s.fire(i,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,i){e.crossDomain||s.CSRFProtection(i)}),i.delegate(s.linkDisableSelector,"ajax:complete",function(){s.enableElement(e(this))}),i.delegate(s.linkClickSelector,"click.rails",function(i){var n=e(this),a=n.data("method"),o=n.data("params");if(!s.allowAction(n))return s.stopEverything(i);if(n.is(s.linkDisableSelector)&&s.disableElement(n),n.data("remote")!==t){if(!(!i.metaKey&&!i.ctrlKey||a&&"GET"!==a||o))return!0;var r=s.handleRemote(n);return r===!1?s.enableElement(n):r.error(function(){s.enableElement(n)}),!1}return n.data("method")?(s.handleMethod(n),!1):void 0}),i.delegate(s.buttonClickSelector,"click.rails",function(t){var i=e(this);return s.allowAction(i)?(s.handleRemote(i),!1):s.stopEverything(t)}),i.delegate(s.inputChangeSelector,"change.rails",function(t){var i=e(this);return s.allowAction(i)?(s.handleRemote(i),!1):s.stopEverything(t)}),i.delegate(s.formSubmitSelector,"submit.rails",function(i){var n=e(this),a=n.data("remote")!==t,o=s.blankInputs(n,s.requiredInputSelector),r=s.nonBlankInputs(n,s.fileInputSelector);if(!s.allowAction(n))return s.stopEverything(i);if(o&&n.attr("novalidate")==t&&s.fire(n,"ajax:aborted:required",[o]))return s.stopEverything(i);if(a){if(r){setTimeout(function(){s.disableFormElements(n)},13);var l=s.fire(n,"ajax:aborted:file",[r]);return l||setTimeout(function(){s.enableFormElements(n)},13),l}return s.handleRemote(n),!1}setTimeout(function(){s.disableFormElements(n)},13)}),i.delegate(s.formInputClickSelector,"click.rails",function(t){var i=e(this);if(!s.allowAction(i))return s.stopEverything(t);var n=i.attr("name"),a=n?{name:n,value:i.val()}:null;i.closest("form").data("ujs:submit-button",a)}),i.delegate(s.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&s.disableFormElements(e(this))}),i.delegate(s.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&s.enableFormElements(e(this))}),e(function(){var t=e("meta[name=csrf-token]").attr("content"),s=e("meta[name=csrf-param]").attr("content");e('form input[name="'+s+'"]').val(t)}))}(jQuery),function(e,t,s){function i(e){var t={},i=/^jQuery\d+$/;return s.each(e.attributes,function(e,s){s.specified&&!i.test(s.name)&&(t[s.name]=s.value)}),t}function n(e,t){var i=this,n=s(i);if(i.value==n.attr("placeholder")&&n.hasClass("placeholder"))if(n.data("placeholder-password")){if(n=n.hide().next().show().attr("id",n.removeAttr("id").data("placeholder-id")),e===!0)return n[0].value=t;n.focus()}else i.value="",n.removeClass("placeholder"),i==o()&&i.select()}function a(){var e,t=this,a=s(t),o=this.id;if(""==t.value){if("password"==t.type){if(!a.data("placeholder-textinput")){try{e=a.clone().attr({type:"text"})}catch(r){e=s("<input>").attr(s.extend(i(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":a,"placeholder-id":o}).bind("focus.placeholder",n),a.data({"placeholder-textinput":e,"placeholder-id":o}).before(e)}a=a.removeAttr("id").hide().prev().attr("id",o).show()}a.addClass("placeholder"),a[0].value=a.attr("placeholder")}else a.removeClass("placeholder")}function o(){try{return t.activeElement}catch(e){}}var r,l,c="[object OperaMini]"==Object.prototype.toString.call(e.operamini),h="placeholder"in t.createElement("input")&&!c,u="placeholder"in t.createElement("textarea")&&!c,d=s.fn,f=s.valHooks,p=s.propHooks;h&&u?(l=d.placeholder=function(){return this},l.input=l.textarea=!0):(l=d.placeholder=function(){var e=this;return e.filter((h?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":n,"blur.placeholder":a}).data("placeholder-enabled",!0).trigger("blur.placeholder"),e},l.input=h,l.textarea=u,r={get:function(e){var t=s(e),i=t.data("placeholder-password");return i?i[0].value:t.data("placeholder-enabled")&&t.hasClass("placeholder")?"":e.value},set:function(e,t){var i=s(e),r=i.data("placeholder-password");return r?r[0].value=t:i.data("placeholder-enabled")?(""==t?(e.value=t,e!=o()&&a.call(e)):i.hasClass("placeholder")?n.call(e,!0,t)||(e.value=t):e.value=t,i):e.value=t}},h||(f.input=r,p.value=r),u||(f.textarea=r,p.value=r),s(function(){s(t).delegate("form","submit.placeholder",function(){var e=s(".placeholder",this).each(n);setTimeout(function(){e.each(a)},10)})}),s(e).bind("beforeunload.placeholder",function(){s(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),/* =============================================================
 * bootstrap-typeahead.js v2.3.2
 * http://twbs.github.com/bootstrap/javascript.html#typeahead
 * =============================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(e){"use strict";var t=function(t,s){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,s),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var t;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(t=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,t?this.process(t):this)},process:function(t){var s=this;return t=e.grep(t,function(e){return s.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,s=[],i=[],n=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?i.push(t):n.push(t):s.push(t);return s.concat(i,n)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var s=this;return t=e(t).map(function(t,i){return t=e(s.options.item).attr("data-value",i),t.find("a").html(s.highlighter(i)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(){var t=this.$menu.find(".active").removeClass("active"),s=t.next();s.length||(s=e(this.$menu.find("li")[0])),s.addClass("active")},prev:function(){var e=this.$menu.find(".active").removeClass("active"),t=e.prev();t.length||(t=this.$menu.find("li").last()),t.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var s=e.fn.typeahead;e.fn.typeahead=function(s){return this.each(function(){var i=e(this),n=i.data("typeahead"),a="object"==typeof s&&s;n||i.data("typeahead",n=new t(this,a)),"string"==typeof s&&n[s]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=s,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var t=e(this);t.data("typeahead")||t.typeahead(t.data())})}(window.jQuery),function(e,t){"use strict";var s=e.History=e.History||{},i=e.jQuery;if("undefined"!=typeof s.Adapter)throw new Error("History.js Adapter has already been loaded...");s.Adapter={bind:function(e,t,s){i(e).bind(t,s)},trigger:function(e,t,s){i(e).trigger(t,s)},extractEventData:function(e,s,i){var n=s&&s.originalEvent&&s.originalEvent[e]||i&&i[e]||t;return n},onDomLoad:function(e){i(e)}},"undefined"!=typeof s.init&&s.init()}(window),$("input, textarea").placeholder(),$("#greeting .close-reveal-div").click(function(){$(".close-reveal-div").parents("#greeting").slideUp(800)}),$(".close-reveal-modal").on("click",function(){$(".dropup").click()}),$(".exploredrop").click(function(){$(this).toggleClass("dropup")}),$(".helpdrop").click(function(){$(this).toggleClass("dropup")}),$(".browse [group]").click(function(){group=$(this).attr("group"),$("section.areas").hide(),$("#metro-"+group).removeClass("hidden").fadeIn()}),$(".tab-btns > a").click(function(e){e.preventDefault(),$(this).siblings().removeClass("selected"),$(this).addClass("selected"),$(".browseareas,#browse #gallery,#browse #answers").hide(),$("section.browse").removeClass("answers").removeClass("gallery").addClass($(this).attr("href").split("#").join("")),$("#browse "+$(this).attr("href")).fadeIn()}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Number.prototype.formatMoney=function(e,t,s){var i=this,e=isNaN(e=Math.abs(e))?2:e,t=void 0==t?".":t,s=void 0==s?",":s,n=0>i?"-":"",a=parseInt(i=Math.abs(+i||0).toFixed(e))+"",o=(o=a.length)>3?o%3:0;return n+(o?a.substr(0,o)+s:"")+a.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+s)+(e?t+Math.abs(i-a).toFixed(e).slice(2):"")};var LATIN_MAP={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Æ:"AE",Ç:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ő:"O",Ø:"O",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ű:"U",Ý:"Y",Þ:"TH",ß:"ss",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",æ:"ae",ç:"c",è:"e",é:"e",ê:"e",ë:"e",ì:"i",í:"i",î:"i",ï:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ő:"o",ø:"o",ù:"u",ú:"u",û:"u",ü:"u",ű:"u",ý:"y",þ:"th",ÿ:"y"},LATIN_SYMBOLS_MAP={"©":"(c)"},GREEK_MAP={α:"a",β:"b",γ:"g",δ:"d",ε:"e",ζ:"z",η:"h",θ:"8",ι:"i",κ:"k",λ:"l",μ:"m",ν:"n",ξ:"3",ο:"o",π:"p",ρ:"r",σ:"s",τ:"t",υ:"y",φ:"f",χ:"x",ψ:"ps",ω:"w",ά:"a",έ:"e",ί:"i",ό:"o",ύ:"y",ή:"h",ώ:"w",ς:"s",ϊ:"i",ΰ:"y",ϋ:"y",ΐ:"i",Α:"A",Β:"B",Γ:"G",Δ:"D",Ε:"E",Ζ:"Z",Η:"H",Θ:"8",Ι:"I",Κ:"K",Λ:"L",Μ:"M",Ν:"N",Ξ:"3",Ο:"O",Π:"P",Ρ:"R",Σ:"S",Τ:"T",Υ:"Y",Φ:"F",Χ:"X",Ψ:"PS",Ω:"W",Ά:"A",Έ:"E",Ί:"I",Ό:"O",Ύ:"Y",Ή:"H",Ώ:"W",Ϊ:"I",Ϋ:"Y"},TURKISH_MAP={ş:"s",Ş:"S",ı:"i",İ:"I",ç:"c",Ç:"C",ü:"u",Ü:"U",ö:"o",Ö:"O",ğ:"g",Ğ:"G"},RUSSIAN_MAP={а:"a",б:"b",в:"v",г:"g",д:"d",е:"e",ё:"yo",ж:"zh",з:"z",и:"i",й:"j",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"h",ц:"c",ч:"ch",ш:"sh",щ:"sh",ъ:"",ы:"y",ь:"",э:"e",ю:"yu",я:"ya",А:"A",Б:"B",В:"V",Г:"G",Д:"D",Е:"E",Ё:"Yo",Ж:"Zh",З:"Z",И:"I",Й:"J",К:"K",Л:"L",М:"M",Н:"N",О:"O",П:"P",Р:"R",С:"S",Т:"T",У:"U",Ф:"F",Х:"H",Ц:"C",Ч:"Ch",Ш:"Sh",Щ:"Sh",Ъ:"",Ы:"Y",Ь:"",Э:"E",Ю:"Yu",Я:"Ya"},UKRAINIAN_MAP={Є:"Ye",І:"I",Ї:"Yi",Ґ:"G",є:"ye",і:"i",ї:"yi",ґ:"g"},CZECH_MAP={č:"c",ď:"d",ě:"e",ň:"n",ř:"r",š:"s",ť:"t",ů:"u",ž:"z",Č:"C",Ď:"D",Ě:"E",Ň:"N",Ř:"R",Š:"S",Ť:"T",Ů:"U",Ž:"Z"},POLISH_MAP={ą:"a",ć:"c",ę:"e",ł:"l",ń:"n",ó:"o",ś:"s",ź:"z",ż:"z",Ą:"A",Ć:"C",Ę:"e",Ł:"L",Ń:"N",Ó:"o",Ś:"S",Ź:"Z",Ż:"Z"},LATVIAN_MAP={ā:"a",č:"c",ē:"e",ģ:"g",ī:"i",ķ:"k",ļ:"l",ņ:"n",š:"s",ū:"u",ž:"z",Ā:"A",Č:"C",Ē:"E",Ģ:"G",Ī:"i",Ķ:"k",Ļ:"L",Ņ:"N",Š:"S",Ū:"u",Ž:"Z"},ALL_DOWNCODE_MAPS=new Array;ALL_DOWNCODE_MAPS[0]=LATIN_MAP,ALL_DOWNCODE_MAPS[1]=LATIN_SYMBOLS_MAP,ALL_DOWNCODE_MAPS[2]=GREEK_MAP,ALL_DOWNCODE_MAPS[3]=TURKISH_MAP,ALL_DOWNCODE_MAPS[4]=RUSSIAN_MAP,ALL_DOWNCODE_MAPS[5]=UKRAINIAN_MAP,ALL_DOWNCODE_MAPS[6]=CZECH_MAP,ALL_DOWNCODE_MAPS[7]=POLISH_MAP,ALL_DOWNCODE_MAPS[8]=LATVIAN_MAP;var Downcoder=new Object;Downcoder.Initialize=function(){if(!Downcoder.map){Downcoder.map={},Downcoder.chars="";for(var e in ALL_DOWNCODE_MAPS){var t=ALL_DOWNCODE_MAPS[e];for(var s in t)Downcoder.map[s]=t[s],Downcoder.chars+=s}Downcoder.regex=new RegExp("["+Downcoder.chars+"]|[^"+Downcoder.chars+"]+","g")}},/*

Uniform v1.7.5
Copyright Â© 2009 Josh Pyles / Pixelmatrix Design LLC
http://pixelmatrixdesign.com

Requires jQuery 1.4 or newer

Much thanks to Thomas Reynolds and Buck Wilson for their help and advice on this

Disabling text selection is made possible by Mathias Bynens <http://mathiasbynens.be/>
and his noSelect plugin. <http://github.com/mathiasbynens/noSelect-jQuery-Plugin>

Also, thanks to David Kaneda and Eugene Bond for their contributions to the plugin

License:
MIT License - http://www.opensource.org/licenses/mit-license.php

Enjoy!

*/
function(e){e.uniform={options:{selectClass:"selector",radioClass:"radio",checkboxClass:"checker",fileClass:"uploader",filenameClass:"filename",fileBtnClass:"action",fileDefaultText:"No file selected",fileBtnText:"Choose File",checkedClass:"checked",focusClass:"focus",disabledClass:"disabled",buttonClass:"button",activeClass:"active",hoverClass:"hover",useID:!0,idPrefix:"uniform",resetSelector:!1,autoHide:!0},elements:[]},e.support.selectOpacity=e.browser.msie&&e.browser.version<7?!1:!0,e.fn.uniform=function(t){function s(t){$el=e(t),$el.addClass($el.attr("type")),c(t)}function i(t){e(t).addClass("uniform"),c(t)}function n(s){var i=e(s),n=e("<div>"),a=e("<span>");n.addClass(t.buttonClass),t.useID&&""!=i.attr("id")&&n.attr("id",t.idPrefix+"-"+i.attr("id"));var o;i.is("a")||i.is("button")?o=i.text():(i.is(":submit")||i.is(":reset")||i.is("input[type=button]"))&&(o=i.attr("value")),o=""==o?i.is(":reset")?"Reset":"Submit":o,a.html(o),i.css("opacity",0),i.wrap(n),i.wrap(a),n=i.closest("div"),a=i.closest("span"),i.is(":disabled")&&n.addClass(t.disabledClass),n.bind({"mouseenter.uniform":function(){n.addClass(t.hoverClass)},"mouseleave.uniform":function(){n.removeClass(t.hoverClass),n.removeClass(t.activeClass)},"mousedown.uniform touchbegin.uniform":function(){n.addClass(t.activeClass)},"mouseup.uniform touchend.uniform":function(){n.removeClass(t.activeClass)},"click.uniform touchend.uniform":function(t){if(e(t.target).is("span")||e(t.target).is("div"))if(s[0].dispatchEvent){var i=document.createEvent("MouseEvents");i.initEvent("click",!0,!0),s[0].dispatchEvent(i)}else s[0].click()}}),s.bind({"focus.uniform":function(){n.addClass(t.focusClass)},"blur.uniform":function(){n.removeClass(t.focusClass)}}),e.uniform.noSelect(n),c(s)}function a(s){var i=e(s),n=e("<div />"),a=e("<span />");"none"==!i.css("display")&&t.autoHide&&n.hide(),n.addClass(t.selectClass),t.useID&&""!=s.attr("id")&&n.attr("id",t.idPrefix+"-"+s.attr("id"));var o=s.find(":selected:first");0==o.length&&(o=s.find("option:first")),a.html(o.html()),s.css("opacity",0),s.wrap(n),s.before(a),n=s.parent("div"),a=s.siblings("span"),s.bind({"change.uniform":function(){a.text(s.find(":selected").html()),n.removeClass(t.activeClass)},"focus.uniform":function(){n.addClass(t.focusClass)},"blur.uniform":function(){n.removeClass(t.focusClass),n.removeClass(t.activeClass)},"mousedown.uniform touchbegin.uniform":function(){n.addClass(t.activeClass)},"mouseup.uniform touchend.uniform":function(){n.removeClass(t.activeClass)},"click.uniform touchend.uniform":function(){n.removeClass(t.activeClass)},"mouseenter.uniform":function(){n.addClass(t.hoverClass)},"mouseleave.uniform":function(){n.removeClass(t.hoverClass),n.removeClass(t.activeClass)},"keyup.uniform":function(){a.text(s.find(":selected").html())}}),e(s).attr("disabled")&&n.addClass(t.disabledClass),e.uniform.noSelect(a),c(s)}function o(s){var i=e(s),n=e("<div />"),a=e("<span />");"none"==!i.css("display")&&t.autoHide&&n.hide(),n.addClass(t.checkboxClass),t.useID&&""!=s.attr("id")&&n.attr("id",t.idPrefix+"-"+s.attr("id")),e(s).wrap(n),e(s).wrap(a),a=s.parent(),n=a.parent(),e(s).css("opacity",0).bind({"focus.uniform":function(){n.addClass(t.focusClass)},"blur.uniform":function(){n.removeClass(t.focusClass)},"click.uniform touchend.uniform":function(){e(s).attr("checked")?a.addClass(t.checkedClass):a.removeClass(t.checkedClass)},"mousedown.uniform touchbegin.uniform":function(){n.addClass(t.activeClass)},"mouseup.uniform touchend.uniform":function(){n.removeClass(t.activeClass)},"mouseenter.uniform":function(){n.addClass(t.hoverClass)},"mouseleave.uniform":function(){n.removeClass(t.hoverClass),n.removeClass(t.activeClass)}}),e(s).attr("checked")&&a.addClass(t.checkedClass),e(s).attr("disabled")&&n.addClass(t.disabledClass),c(s)}function r(s){var i=e(s),n=e("<div />"),a=e("<span />");"none"==!i.css("display")&&t.autoHide&&n.hide(),n.addClass(t.radioClass),t.useID&&""!=s.attr("id")&&n.attr("id",t.idPrefix+"-"+s.attr("id")),e(s).wrap(n),e(s).wrap(a),a=s.parent(),n=a.parent(),e(s).css("opacity",0).bind({"focus.uniform":function(){n.addClass(t.focusClass)},"blur.uniform":function(){n.removeClass(t.focusClass)},"click.uniform touchend.uniform":function(){if(e(s).attr("checked")){var i=t.radioClass.split(" ")[0];e("."+i+" span."+t.checkedClass+":has([name='"+e(s).attr("name")+"'])").removeClass(t.checkedClass),a.addClass(t.checkedClass)}else a.removeClass(t.checkedClass)},"mousedown.uniform touchend.uniform":function(){e(s).is(":disabled")||n.addClass(t.activeClass)},"mouseup.uniform touchbegin.uniform":function(){n.removeClass(t.activeClass)},"mouseenter.uniform touchend.uniform":function(){n.addClass(t.hoverClass)},"mouseleave.uniform":function(){n.removeClass(t.hoverClass),n.removeClass(t.activeClass)}}),e(s).attr("checked")&&a.addClass(t.checkedClass),e(s).attr("disabled")&&n.addClass(t.disabledClass),c(s)}function l(s){var i=e(s),n=e("<div />"),a=e("<span>"+t.fileDefaultText+"</span>"),o=e("<span>"+t.fileBtnText+"</span>");if("none"==!i.css("display")&&t.autoHide&&n.hide(),n.addClass(t.fileClass),a.addClass(t.filenameClass),o.addClass(t.fileBtnClass),t.useID&&""!=i.attr("id")&&n.attr("id",t.idPrefix+"-"+i.attr("id")),i.wrap(n),i.after(o),i.after(a),n=i.closest("div"),a=i.siblings("."+t.filenameClass),o=i.siblings("."+t.fileBtnClass),!i.attr("size")){var r=n.width();i.attr("size",r/10)}var l=function(){var e=i.val();""===e?e=t.fileDefaultText:(e=e.split(/[\/\\]+/),e=e[e.length-1]),a.text(e)};l(),i.css("opacity",0).bind({"focus.uniform":function(){n.addClass(t.focusClass)},"blur.uniform":function(){n.removeClass(t.focusClass)},"mousedown.uniform":function(){e(s).is(":disabled")||n.addClass(t.activeClass)},"mouseup.uniform":function(){n.removeClass(t.activeClass)},"mouseenter.uniform":function(){n.addClass(t.hoverClass)},"mouseleave.uniform":function(){n.removeClass(t.hoverClass),n.removeClass(t.activeClass)}}),e.browser.msie?i.bind("click.uniform.ie7",function(){setTimeout(l,0)}):i.bind("change.uniform",l),i.attr("disabled")&&n.addClass(t.disabledClass),e.uniform.noSelect(a),e.uniform.noSelect(o),c(s)}function c(t){t=e(t).get(),t.length>1?e.each(t,function(t,s){e.uniform.elements.push(s)}):e.uniform.elements.push(t)}t=e.extend(e.uniform.options,t);var h=this;return 0!=t.resetSelector&&e(t.resetSelector).mouseup(function(){function t(){e.uniform.update(h)}setTimeout(t,10)}),e.uniform.restore=function(t){void 0==t&&(t=e(e.uniform.elements)),e(t).each(function(){e(this).is(":checkbox")?e(this).unwrap().unwrap():e(this).is("select")?(e(this).siblings("span").remove(),e(this).unwrap()):e(this).is(":radio")?e(this).unwrap().unwrap():e(this).is(":file")?(e(this).siblings("span").remove(),e(this).unwrap()):e(this).is("button, :submit, :reset, a, input[type='button']")&&e(this).unwrap().unwrap(),e(this).unbind(".uniform"),e(this).css("opacity","1");var s=e.inArray(e(t),e.uniform.elements);e.uniform.elements.splice(s,1)})},e.uniform.noSelect=function(t){function s(){return!1}e(t).each(function(){this.onselectstart=this.ondragstart=s,e(this).mousedown(s).css({MozUserSelect:"none"})})},e.uniform.update=function(s){void 0==s&&(s=e(e.uniform.elements)),s=e(s),s.each(function(){var i=e(this);if(i.is("select")){var n=i.siblings("span"),a=i.parent("div");a.removeClass(t.hoverClass+" "+t.focusClass+" "+t.activeClass),n.html(i.find(":selected").html()),i.is(":disabled")?a.addClass(t.disabledClass):a.removeClass(t.disabledClass)}else if(i.is(":checkbox")){var n=i.closest("span"),a=i.closest("div");a.removeClass(t.hoverClass+" "+t.focusClass+" "+t.activeClass),n.removeClass(t.checkedClass),i.is(":checked")&&n.addClass(t.checkedClass),i.is(":disabled")?a.addClass(t.disabledClass):a.removeClass(t.disabledClass)}else if(i.is(":radio")){var n=i.closest("span"),a=i.closest("div");a.removeClass(t.hoverClass+" "+t.focusClass+" "+t.activeClass),n.removeClass(t.checkedClass),i.is(":checked")&&n.addClass(t.checkedClass),i.is(":disabled")?a.addClass(t.disabledClass):a.removeClass(t.disabledClass)}else if(i.is(":file")){var a=i.parent("div"),o=i.siblings(t.filenameClass);btnTag=i.siblings(t.fileBtnClass),a.removeClass(t.hoverClass+" "+t.focusClass+" "+t.activeClass),o.text(i.val()),i.is(":disabled")?a.addClass(t.disabledClass):a.removeClass(t.disabledClass)}else if(i.is(":submit")||i.is(":reset")||i.is("button")||i.is("a")||s.is("input[type=button]")){var a=i.closest("div");a.removeClass(t.hoverClass+" "+t.focusClass+" "+t.activeClass),i.is(":disabled")?a.addClass(t.disabledClass):a.removeClass(t.disabledClass)}})},this.each(function(){if(e.support.selectOpacity){var t=e(this);t.is("select")?1!=t.attr("multiple")&&(void 0==t.attr("size")||t.attr("size")<=1)&&a(t):t.is(":checkbox")?o(t):t.is(":radio")?r(t):t.is(":file")?l(t):t.is(":text, :password, input[type='email']")?s(t):t.is("textarea")?i(t):(t.is("a")||t.is(":submit")||t.is(":reset")||t.is("button")||t.is("input[type=button]"))&&n(t)}})}}(jQuery),function(e){var t={init:function(s){return this.each(function(){t.destroy.call(this),this.opt=e.extend(!0,{},e.fn.raty.defaults,s);var i=e(this),n=["number","readOnly","score","scoreName"];t._callback.call(this,n),this.opt.precision&&t._adjustPrecision.call(this),this.opt.number=t._between(this.opt.number,0,this.opt.numberMax),this.opt.path=this.opt.path||"",this.opt.path&&"/"!==this.opt.path.slice(this.opt.path.length-1,this.opt.path.length)&&(this.opt.path+="/"),this.stars=t._createStars.call(this),this.score=t._createScore.call(this),t._apply.call(this,this.opt.score);var a=this.opt.space?4:0,o=this.opt.width||this.opt.number*this.opt.size+this.opt.number*a;this.opt.cancel&&(this.cancel=t._createCancel.call(this),o+=this.opt.size+a),this.opt.readOnly?t._lock.call(this):(i.css("cursor","pointer"),t._binds.call(this)),this.opt.width!==!1&&i.css("width",o),t._target.call(this,this.opt.score),i.data({settings:this.opt,raty:!0})})},_adjustPrecision:function(){this.opt.targetType="score",this.opt.half=!0},_apply:function(e){e&&e>0&&(e=t._between(e,0,this.opt.number),this.score.val(e)),t._fill.call(this,e),e&&t._roundStars.call(this,e)},_between:function(e,t,s){return Math.min(Math.max(parseFloat(e),t),s)},_binds:function(){this.cancel&&t._bindCancel.call(this),t._bindClick.call(this),t._bindOut.call(this),t._bindOver.call(this)},_bindCancel:function(){t._bindClickCancel.call(this),t._bindOutCancel.call(this),t._bindOverCancel.call(this)},_bindClick:function(){var t=this,s=e(t);t.stars.on("click.raty",function(e){t.score.val(t.opt.half||t.opt.precision?s.data("score"):this.alt),t.opt.click&&t.opt.click.call(t,parseFloat(t.score.val()),e)})},_bindClickCancel:function(){var e=this;e.cancel.on("click.raty",function(t){e.score.removeAttr("value"),e.opt.click&&e.opt.click.call(e,null,t)})},_bindOut:function(){var s=this;e(this).on("mouseleave.raty",function(e){var i=parseFloat(s.score.val())||void 0;t._apply.call(s,i),t._target.call(s,i,e),s.opt.mouseout&&s.opt.mouseout.call(s,i,e)})},_bindOutCancel:function(){var t=this;t.cancel.on("mouseleave.raty",function(s){e(this).attr("src",t.opt.path+t.opt.cancelOff),t.opt.mouseout&&t.opt.mouseout.call(t,t.score.val()||null,s)})},_bindOverCancel:function(){var s=this;s.cancel.on("mouseover.raty",function(i){e(this).attr("src",s.opt.path+s.opt.cancelOn),s.stars.attr("src",s.opt.path+s.opt.starOff),t._target.call(s,null,i),s.opt.mouseover&&s.opt.mouseover.call(s,null)})},_bindOver:function(){var s=this,i=e(s),n=s.opt.half?"mousemove.raty":"mouseover.raty";s.stars.on(n,function(n){var a=parseInt(this.alt,10);if(s.opt.half){var o=parseFloat((n.pageX-e(this).offset().left)/s.opt.size),r=o>.5?1:.5;a=a-1+r,t._fill.call(s,a),s.opt.precision&&(a=a-r+o),t._roundStars.call(s,a),i.data("score",a)}else t._fill.call(s,a);t._target.call(s,a,n),s.opt.mouseover&&s.opt.mouseover.call(s,a,n)})},_callback:function(e){for(i in e)"function"==typeof this.opt[e[i]]&&(this.opt[e[i]]=this.opt[e[i]].call(this))},_createCancel:function(){var t=e(this),s=this.opt.path+this.opt.cancelOff,i=e("<img />",{src:s,alt:"x",title:this.opt.cancelHint,"class":"raty-cancel"});return"left"==this.opt.cancelPlace?t.prepend("&#160;").prepend(i):t.append("&#160;").append(i),i},_createScore:function(){return e("<input />",{type:"hidden",name:this.opt.scoreName}).appendTo(this)},_createStars:function(){for(var s=e(this),i=1;i<=this.opt.number;i++){var n=t._getHint.call(this,i),a=this.opt.score&&this.opt.score>=i?"starOn":"starOff";a=this.opt.path+this.opt[a],e("<img />",{src:a,alt:i,title:n}).appendTo(this),this.opt.space&&s.append(i<this.opt.number?"&#160;":"")}return s.children("img")},_error:function(t){e(this).html(t),e.error(t)},_fill:function(e){for(var t=this,s=0,i=1;i<=t.stars.length;i++){var n=t.stars.eq(i-1),a=t.opt.single?i==e:e>=i;if(t.opt.iconRange&&t.opt.iconRange.length>s){var o=t.opt.iconRange[s],r=o.on||t.opt.starOn,l=o.off||t.opt.starOff,c=a?r:l;i<=o.range&&n.attr("src",t.opt.path+c),i==o.range&&s++}else{var c=a?"starOn":"starOff";n.attr("src",this.opt.path+this.opt[c])}}},_getHint:function(e){var t=this.opt.hints[e-1];return""===t?"":t||e},_lock:function(){var s=parseInt(this.score.val(),10),i=s?t._getHint.call(this,s):this.opt.noRatedMsg;e(this).data("readonly",!0).css("cursor","").attr("title",i),this.score.attr("readonly","readonly"),this.stars.attr("title",i),this.cancel&&this.cancel.hide()},_roundStars:function(e){var t=(e-Math.floor(e)).toFixed(2);if(t>this.opt.round.down){var s="starOn";this.opt.halfShow&&t<this.opt.round.up?s="starHalf":t<this.opt.round.full&&(s="starOff"),this.stars.eq(Math.ceil(e)-1).attr("src",this.opt.path+this.opt[s])}},_target:function(s,i){if(this.opt.target){var n=e(this.opt.target);0===n.length&&t._error.call(this,"Target selector invalid or missing!"),this.opt.targetFormat.indexOf("{score}")<0&&t._error.call(this,'Template "{score}" missing!');var a=i&&"mouseover"==i.type;void 0===s?s=this.opt.targetText:null===s?s=a?this.opt.cancelHint:this.opt.targetText:("hint"==this.opt.targetType?s=t._getHint.call(this,Math.ceil(s)):this.opt.precision&&(s=parseFloat(s).toFixed(1)),a||this.opt.targetKeep||(s=this.opt.targetText)),s&&(s=this.opt.targetFormat.toString().replace("{score}",s)),n.is(":input")?n.val(s):n.html(s)}},_unlock:function(){e(this).data("readonly",!1).css("cursor","pointer").removeAttr("title"),this.score.removeAttr("readonly","readonly");for(var s=0;s<this.opt.number;s++)this.stars.eq(s).attr("title",t._getHint.call(this,s+1));this.cancel&&this.cancel.css("display","")},cancel:function(s){return this.each(function(){e(this).data("readonly")!==!0&&(t[s?"click":"score"].call(this,null),this.score.removeAttr("value"))})},click:function(s){return e(this).each(function(){e(this).data("readonly")!==!0&&(t._apply.call(this,s),this.opt.click||t._error.call(this,'You must add the "click: function(score, evt) { }" callback.'),this.opt.click.call(this,s,{type:"click"}),t._target.call(this,s))})},destroy:function(){return e(this).each(function(){var t=e(this),s=t.data("raw");s?t.off(".raty").empty().css({cursor:s.style.cursor,width:s.style.width}).removeData("readonly"):t.data("raw",t.clone()[0])})},getScore:function(){var t,s=[];return e(this).each(function(){t=this.score.val(),s.push(t?parseFloat(t):void 0)}),s.length>1?s:s[0]},readOnly:function(s){return this.each(function(){var i=e(this);i.data("readonly")!==s&&(s?(i.off(".raty").children("img").off(".raty"),t._lock.call(this)):(t._binds.call(this),t._unlock.call(this)),i.data("readonly",s))})},reload:function(){return t.set.call(this,{})},score:function(){return arguments.length?t.setScore.apply(this,arguments):t.getScore.call(this)},set:function(t){return this.each(function(){var s=e(this),i=s.data("settings"),n=e.extend({},i,t);s.raty(n)})},setScore:function(s){return e(this).each(function(){e(this).data("readonly")!==!0&&(t._apply.call(this,s),t._target.call(this,s))})}};e.fn.raty=function(s){return t[s]?t[s].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof s&&s?(e.error("Method "+s+" does not exist!"),void 0):t.init.apply(this,arguments)},e.fn.raty.defaults={cancel:!1,cancelHint:"Cancel this rating!",cancelOff:"cancel-off.png",cancelOn:"cancel-on.png",cancelPlace:"left",click:void 0,half:!1,halfShow:!0,hints:["bad","poor","regular","good","gorgeous"],iconRange:void 0,mouseout:void 0,mouseover:void 0,noRatedMsg:"Not rated yet!",number:5,numberMax:20,path:"",precision:!1,readOnly:!1,round:{down:.25,full:.6,up:.76},score:void 0,scoreName:"score",single:!1,size:16,space:!0,starHalf:"star-half.png",starOff:"star-off.png",starOn:"star-on.png",target:void 0,targetFormat:"{score}",targetKeep:!1,targetText:"",targetType:"hint",width:void 0}}(jQuery),/*
	Masked Input plugin for jQuery
	Copyright (c) 2007-2011 Josh Bush (digitalbush.com)
	Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license) 
	Version: 1.3
*/
function(e){var t=(e.browser.msie?"paste":"input")+".mask",s=void 0!=window.orientation;e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn"},e.fn.extend({caret:function(e,t){if(0!=this.length){if("number"==typeof e)return t="number"==typeof t?t:e,this.each(function(){if(this.setSelectionRange)this.setSelectionRange(e,t);else if(this.createTextRange){var s=this.createTextRange();s.collapse(!0),s.moveEnd("character",t),s.moveStart("character",e),s.select()}});if(this[0].setSelectionRange)e=this[0].selectionStart,t=this[0].selectionEnd;else if(document.selection&&document.selection.createRange){var s=document.selection.createRange();e=0-s.duplicate().moveStart("character",-1e5),t=e+s.text.length}return{begin:e,end:t}}},unmask:function(){return this.trigger("unmask")},mask:function(i,n){if(!i&&this.length>0){var a=e(this[0]);return a.data(e.mask.dataName)()}n=e.extend({placeholder:"_",completed:null},n);var o=e.mask.definitions,r=[],l=i.length,c=null,h=i.length;return e.each(i.split(""),function(e,t){"?"==t?(h--,l=e):o[t]?(r.push(new RegExp(o[t])),null==c&&(c=r.length-1)):r.push(null)}),this.trigger("unmask").each(function(){function a(e){for(var t=w.val(),s=-1,i=0,a=0;h>i;i++)if(r[i]){for(C[i]=n.placeholder;a++<t.length;){var o=t.charAt(a-1);if(r[i].test(o)){C[i]=o,s=i;break}}if(a>t.length)break}else C[i]==t.charAt(a)&&i!=l&&(a++,s=i);return!e&&l>s+1?(w.val(""),d(0,h)):(e||s+1>=l)&&(u(),e||w.val(w.val().substring(0,s+1))),l?i:c}function u(){return w.val(C.join("")).val()}function d(e,t){for(var s=e;t>s&&h>s;s++)r[s]&&(C[s]=n.placeholder)}function f(e){var t=e.which,s=w.caret();if(e.ctrlKey||e.altKey||e.metaKey||32>t)return!0;if(t){s.end-s.begin!=0&&(d(s.begin,s.end),v(s.begin,s.end-1));var i=b(s.begin-1);if(h>i){var a=String.fromCharCode(t);if(r[i].test(a)){m(i),C[i]=a,u();var o=b(i);w.caret(o),n.completed&&o>=h&&n.completed.call(w)}}return!1}}function p(e){var t=e.which;if(8==t||46==t||s&&127==t){var i=w.caret(),n=i.begin,o=i.end;return o-n==0&&(n=46!=t?g(n):o=b(n-1),o=46==t?b(o):o),d(n,o),v(n,o-1),!1}return 27==t?(w.val(y),w.caret(0,a()),!1):void 0}function m(e){for(var t=e,s=n.placeholder;h>t;t++)if(r[t]){var i=b(t),a=C[t];if(C[t]=s,!(h>i&&r[i].test(a)))break;s=a}}function v(e,t){if(!(0>e)){for(var s=e,i=b(t);h>s;s++)if(r[s]){if(!(h>i&&r[s].test(C[i])))break;C[s]=C[i],C[i]=n.placeholder,i=b(i)}u(),w.caret(Math.max(c,e))}}function g(e){for(;--e>=0&&!r[e];);return e}function b(e){for(;++e<=h&&!r[e];);return e}var w=e(this),C=e.map(i.split(""),function(e){return"?"!=e?o[e]?n.placeholder:e:void 0}),y=w.val();w.data(e.mask.dataName,function(){return e.map(C,function(e,t){return r[t]&&e!=n.placeholder?e:null}).join("")}),w.attr("readonly")||w.one("unmask",function(){w.unbind(".mask").removeData(e.mask.dataName)}).bind("focus.mask",function(){y=w.val();var t=a();u();var s=function(){t==i.length?w.caret(0,t):w.caret(t)};(e.browser.msie?s:function(){setTimeout(s,0)})()}).bind("blur.mask",function(){a(),w.val()!=y&&w.change()}).bind("keydown.mask",p).bind("keypress.mask",f).bind(t,function(){setTimeout(function(){w.caret(a(!0))},0)}),a()})}})}(jQuery),$(document).ready(function(){function e(){$("#uploadProfileImageModal").modal("hide"),$("#serviceRequestModal").modal("show")}$(".profile_image_wrapper .filepicker_field input").change(function(t){$(".profile_image").html("<div style='width: 160px; height: 160px; background-color: lightgrey; '></div>"),$(".profile_image").spin();var s=t.originalEvent.fpfile,i=$(".profile_image").attr("data-user-id"),n={filename:s.filename,filepicker_slug:s.url,s3_slug:s.key,image_type:"profile",owner_type:"homeowner",owner_id:i};$.ajax({type:"POST",url:"/api/v1/images",data:n,dataType:"json",success:function(t){$(".profile_image").spin(!1),$(".profile_image").html("<img src='"+t.cloudfront_slug+"' alt='user profile image'>"),$("#uploadProfileImageModal").length&&setTimeout(e,1e3)}})}),$("#new_contractor_signup_form input.unclaim").click(function(e){e.preventDefault(),$("#new_contractor_signup_form .button").val("Processing..."),$(this).prop("disabled",!0);var t=$.trim($("#contractor_signup_form_zipcode").val()),s=$.trim($("#contractor_signup_form_business_name").val()),i=$.trim($("#contractor_signup_form_email").val()),n=$.trim($("#contractor_signup_form_phone").val()),a=$.trim($("#contractor_signup_form_password").val()),o={zipcode:t,business_name:s};(s.length<2&&t.length<4||a.length<6||n.length<=1||i.length<5)&&$("form#new_contractor_signup_form").submit(),$.ajax({type:"GET",url:"/api/v1/contractor/find_matches",data:o,dataType:"json",success:function(e){if(e.matches.length>0){$("#possible-match-modal").modal("show");for(var t="",s=0;s<e.matches.length;s++)t+="<input type='radio' name='contractor_id' value='"+e.matches[s].nid+"'>"+e.matches[s].business_name+"<br>";$("#possible-match-modal form#matches").html(t),$("#this-is-my-business").click(function(){var e=$("input[name=contractor_id]:checked","form#matches").val();$("#new_contractor_signup_form input#contractor_signup_form_contractor_id").val(e),$("#new_contractor_signup_form input#contractor_signup_form_claim").val("true"),$("form#new_contractor_signup_form").submit()}),$("#not-my-business").click(function(){$("form#new_contractor_signup_form").submit()})}else $("form#new_contractor_signup_form").submit()},error:function(){console.log("Something went wrong.")}})}),$("form#sign_up_user").bind("ajax:success",function(e,t){t.success?($("#new_session_Modal").modal("hide"),$("#sign_in_button").hide()):$(".flash").html("<div class='alert alert-warning fade in alert-block'>Please try again.</div>")})}),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Spinner=t()}(this,function(){"use strict";function e(e,t){var s,i=document.createElement(e||"div");for(s in t)i[s]=t[s];return i}function t(e){for(var t=1,s=arguments.length;s>t;t++)e.appendChild(arguments[t]);return e}function s(e,t,s,i){var n=["opacity",t,~~(100*e),s,i].join("-"),a=.01+s/i*100,o=Math.max(1-(1-e)/t*(100-a),e),r=h.substring(0,h.indexOf("Animation")).toLowerCase(),l=r&&"-"+r+"-"||"";return d[n]||(f.insertRule("@"+l+"keyframes "+n+"{0%{opacity:"+o+"}"+a+"%{opacity:"+e+"}"+(a+.01)+"%{opacity:1}"+(a+t)%100+"%{opacity:"+e+"}100%{opacity:"+o+"}}",f.cssRules.length),d[n]=1),n}function i(e,t){var s,i,n=e.style;for(t=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<u.length;i++)if(s=u[i]+t,void 0!==n[s])return s;return void 0!==n[t]?t:void 0}function n(e,t){for(var s in t)e.style[i(e,s)||s]=t[s];return e}function a(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)void 0===e[i]&&(e[i]=s[i])}return e}function o(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function r(e,t){return"string"==typeof e?e:e[t%e.length]}function l(e){return"undefined"==typeof this?new l(e):(this.opts=a(e||{},l.defaults,p),void 0)}function c(){function s(t,s){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',s)}f.addRule(".spin-vml","behavior:url(#default#VML)"),l.prototype.lines=function(e,i){function a(){return n(s("group",{coordsize:h+" "+h,coordorigin:-c+" "+-c}),{width:h,height:h})}function o(e,o,l){t(d,t(n(a(),{rotation:360/i.lines*e+"deg",left:~~o}),t(n(s("roundrect",{arcsize:i.corners}),{width:c,height:i.width,left:i.radius,top:-i.width>>1,filter:l}),s("fill",{color:r(i.color,e),opacity:i.opacity}),s("stroke",{opacity:0}))))}var l,c=i.length+i.width,h=2*c,u=2*-(i.width+i.length)+"px",d=n(a(),{position:"absolute",top:u,left:u});if(i.shadow)for(l=1;l<=i.lines;l++)o(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=i.lines;l++)o(l);return t(e,d)},l.prototype.opacity=function(e,t,s,i){var n=e.firstChild;i=i.shadow&&i.lines||0,n&&t+i<n.childNodes.length&&(n=n.childNodes[t+i],n=n&&n.firstChild,n=n&&n.firstChild,n&&(n.opacity=s))}}var h,u=["webkit","Moz","ms","O"],d={},f=function(){var s=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],s),s.sheet||s.styleSheet}(),p={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};l.defaults={},a(l.prototype,{spin:function(t){this.stop();var s,i,a=this,r=a.opts,l=a.el=n(e(0,{className:r.className}),{position:r.position,width:0,zIndex:r.zIndex}),c=r.radius+r.length+r.width;if(t&&(t.insertBefore(l,t.firstChild||null),i=o(t),s=o(l),n(l,{left:("auto"==r.left?i.x-s.x+(t.offsetWidth>>1):parseInt(r.left,10)+c)+"px",top:("auto"==r.top?i.y-s.y+(t.offsetHeight>>1):parseInt(r.top,10)+c)+"px"})),l.setAttribute("role","progressbar"),a.lines(l,a.opts),!h){var u,d=0,f=(r.lines-1)*(1-r.direction)/2,p=r.fps,m=p/r.speed,v=(1-r.opacity)/(m*r.trail/100),g=m/r.lines;!function b(){d++;for(var e=0;e<r.lines;e++)u=Math.max(1-(d+(r.lines-e)*g)%m*v,r.opacity),a.opacity(l,e*r.direction+f,u,r);a.timeout=a.el&&setTimeout(b,~~(1e3/p))}()}return a},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(i,a){function o(t,s){return n(e(),{position:"absolute",width:a.length+a.width+"px",height:a.width+"px",background:t,boxShadow:s,transformOrigin:"left",transform:"rotate("+~~(360/a.lines*c+a.rotate)+"deg) translate("+a.radius+"px,0)",borderRadius:(a.corners*a.width>>1)+"px"})}for(var l,c=0,u=(a.lines-1)*(1-a.direction)/2;c<a.lines;c++)l=n(e(),{position:"absolute",top:1+~(a.width/2)+"px",transform:a.hwaccel?"translate3d(0,0,0)":"",opacity:a.opacity,animation:h&&s(a.opacity,a.trail,u+c*a.direction,a.lines)+" "+1/a.speed+"s linear infinite"}),a.shadow&&t(l,n(o("#000","0 0 4px #000"),{top:"2px"})),t(i,t(l,o(r(a.color,c),"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(e,t,s){t<e.childNodes.length&&(e.childNodes[t].style.opacity=s)}});var m=n(e("group"),{behavior:"url(#default#VML)"});return!i(m,"transform")&&m.adj?c():h=i(m,"animation"),l}),/**
 * Copyright (c) 2011-2013 Felix Gnass
 * Licensed under the MIT license
 */
function(e){if("object"==typeof exports)e(require("jquery"),require("spin"));else if("function"==typeof define&&define.amd)define(["jquery","spin"],e);else{if(!window.Spinner)throw new Error("Spin.js not present");e(window.jQuery,window.Spinner)}}(function(e,t){e.fn.spin=function(s,i){return this.each(function(){var n=e(this),a=n.data();a.spinner&&(a.spinner.stop(),delete a.spinner),s!==!1&&(s=e.extend({color:i||n.css("color")},e.fn.spin.presets[s]||s),a.spinner=new t(s).spin(this))})},e.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}}),/*
Copyright 2012 Igor Vaynberg
 
Version: 3.2 Timestamp: Mon Sep 10 10:38:04 PDT 2012

Licensed under the Apache License, Version 2.0 (the "License"); you may not use this work except in
compliance with the License. You may obtain a copy of the License in the LICENSE file, or at:

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software distributed under the License is
distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and limitations under the License.
*/
function(e){"undefined"==typeof e.fn.each2&&e.fn.extend({each2:function(t){for(var s=e([0]),i=-1,n=this.length;++i<n&&(s.context=s[0]=this[i])&&!1!==t.call(s[0],i,s););return this}})}(jQuery),function(e,t){function s(e,t){var s,i=0,n=t.length;if("undefined"==typeof e)return-1;if(e.constructor===String){for(;n>i;i+=1)if(0===e.localeCompare(t[i]))return i}else for(;n>i;i+=1)if(s=t[i],s.constructor===String){if(0===s.localeCompare(e))return i}else if(s===e)return i;return-1}function i(e,s){return e===s?!0:e===t||s===t||null===e||null===s?!1:e.constructor===String?0===e.localeCompare(s):s.constructor===String?0===s.localeCompare(e):!1}function n(t,s){var i,n,a;if(null===t||1>t.length)return[];for(i=t.split(s),n=0,a=i.length;a>n;n+=1)i[n]=e.trim(i[n]);return i}function a(e,s,i){var n,i=i||t;return function(){var t=arguments;window.clearTimeout(n),n=window.setTimeout(function(){s.apply(i,t)},e)}}function o(e){e.preventDefault(),e.stopPropagation()}function r(e,t,s){var i=e.toUpperCase().indexOf(t.toUpperCase()),t=t.length;0>i?s.push(e):(s.push(e.substring(0,i)),s.push("<span class='select2-match'>"),s.push(e.substring(i,i+t)),s.push("</span>"),s.push(e.substring(i+t,e.length)))}function l(t){var s,i=0,n=null,a=t.quietMillis||100;return function(o){window.clearTimeout(s),s=window.setTimeout(function(){var s=i+=1,a=t.data,r=t.transport||e.ajax,l=t.traditional||!1,c=t.type||"GET",a=a.call(this,o.term,o.page,o.context);null!==n&&n.abort(),n=r.call(null,{url:t.url,dataType:t.dataType,data:a,type:c,traditional:l,success:function(e){i>s||(e=t.results(e,o.page),o.callback(e))}})},a)}}function c(t){var s,i=t,n=function(e){return""+e.text};return e.isArray(i)||(n=i.text,e.isFunction(n)||(s=i.text,n=function(e){return e[s]}),i=i.results),function(t){var s,a=t.term,o={results:[]};""===a?t.callback({results:i}):(s=function(i,o){var r,l,i=i[0];if(i.children){r={};for(l in i)i.hasOwnProperty(l)&&(r[l]=i[l]);r.children=[],e(i.children).each2(function(e,t){s(t,r.children)}),r.children.length&&o.push(r)}else t.matcher(a,n(i))&&o.push(i)},e(i).each2(function(e,t){s(t,o.results)}),t.callback(o))}}function h(s){return e.isFunction(s)?s:function(i){var n=i.term,a={results:[]};e(s).each(function(){var e=this.text!==t,s=e?this.text:this;(""===n||i.matcher(n,s))&&a.results.push(e?this:{id:this,text:this})}),i.callback(a)}}function u(t){if(e.isFunction(t))return!0;if(!t)return!1;throw Error("formatterName must be a function or a falsy value")}function d(t){return e.isFunction(t)?t():t}function f(t){var s=0;return e.each(t,function(e,t){t.children?s+=f(t.children):s++}),s}function p(e,s,n,a){var o,r,l,c,h=e,u=!1;if(!a.createSearchChoice||!a.tokenSeparators||1>a.tokenSeparators.length)return t;for(;;){for(u=-1,r=0,l=a.tokenSeparators.length;l>r&&(c=a.tokenSeparators[r],u=e.indexOf(c),!(u>=0));r++);if(0>u)break;if(o=e.substring(0,u),e=e.substring(u+c.length),0<o.length&&(o=a.createSearchChoice(o,s),o!==t&&null!==o&&a.id(o)!==t&&null!==a.id(o))){for(u=!1,r=0,l=s.length;l>r;r++)if(i(a.id(o),a.id(s[r]))){u=!0;break}u||n(o)}}return 0!=h.localeCompare(e)?e:void 0}function m(t,s){var i=function(){};return i.prototype=new t,i.prototype.constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,s),i}if(window.Select2===t){var v,g,b,w,C,y;v={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case v.LEFT:case v.RIGHT:case v.UP:case v.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case v.SHIFT:case v.CTRL:case v.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}};var S=1;C=function(){return S++},e(document).delegate("body","mousemove",function(t){e.data(document,"select2-lastpos",{x:t.pageX,y:t.pageY})}),e(document).ready(function(){e(document).delegate("body","mousedown touchend",function(s){var i,n=e(s.target).closest("div.select2-container").get(0);n?e(document).find("div.select2-container-active").each(function(){this!==n&&e(this).data("select2").blur()}):(n=e(s.target).closest("div.select2-drop").get(0),e(document).find("div.select2-drop-active").each(function(){this!==n&&e(this).data("select2").blur()})),n=e(s.target),i=n.attr("for"),"LABEL"===s.target.tagName&&i&&0<i.length&&(n=e("#"+i),n=n.data("select2"),n!==t&&(n.focus(),s.preventDefault()))})}),g=m(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(i){var n,r;this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==t&&null!==i.element.data("select2")&&this.destroy(),this.enabled=!0,this.container=this.createContainer(),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+C()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId);var l,c=!1;this.body=function(){return!1===c&&(l=i.element.closest("body"),c=!0),l},i.element.attr("class")!==t&&this.container.addClass(i.element.attr("class").replace(/validate\[[\S ]+] ?/,"")),this.container.css(d(i.containerCss)),this.container.addClass(d(i.containerCssClass)),this.opts.element.data("select2",this).hide().before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(d(i.dropdownCssClass)),this.dropdown.data("select2",this),this.results=n=this.container.find(".select2-results"),this.search=r=this.container.find("input.select2-input"),r.attr("tabIndex",this.opts.element.attr("tabIndex")),this.resultsPage=0,this.context=null,this.initContainer(),this.initContainerWidth(),this.results.bind("mousemove",function(s){var i=e.data(document,"select2-lastpos");(i===t||i.x!==s.pageX||i.y!==s.pageY)&&e(s.target).trigger("mousemove-filtered",s)}),this.dropdown.delegate(".select2-results","mousemove-filtered",this.bind(this.highlightUnderEvent));var h=this.results,u=a(80,function(e){h.trigger("scroll-debounced",e)});h.bind("scroll",function(e){0<=s(e.target,h.get())&&u(e)}),this.dropdown.delegate(".select2-results","scroll-debounced",this.bind(this.loadMoreIfNeeded)),e.fn.mousewheel&&n.mousewheel(function(e,t,s,i){t=n.scrollTop(),i>0&&0>=t-i?(n.scrollTop(0),o(e)):0>i&&n.get(0).scrollHeight-n.scrollTop()+i<=n.height()&&(n.scrollTop(n.get(0).scrollHeight-n.height()),o(e))}),r.bind("keydown",function(){e.data(r,"keyup-change-value")===t&&e.data(r,"keyup-change-value",r.val())}),r.bind("keyup",function(){var s=e.data(r,"keyup-change-value");s!==t&&r.val()!==s&&(e.removeData(r,"keyup-change-value"),r.trigger("keyup-change"))}),r.bind("keyup-change",this.bind(this.updateResults)),r.bind("focus",function(){r.addClass("select2-focused")," "===r.val()&&r.val("")}),r.bind("blur",function(){r.removeClass("select2-focused")}),this.dropdown.delegate(".select2-results","mouseup",this.bind(function(t){0<e(t.target).closest(".select2-result-selectable:not(.select2-disabled)").length?(this.highlightUnderEvent(t),this.selectHighlighted(t)):this.focusSearch(),o(t)})),this.dropdown.bind("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),(i.element.is(":disabled")||i.element.is("[readonly='readonly']"))&&this.disable()},destroy:function(){var e=this.opts.element.data("select2");e!==t&&(e.container.remove(),e.dropdown.remove(),e.opts.element.removeData("select2").unbind(".select2").show())},prepareOpts:function(s){var a,o,r;if(a=s.element,"select"===a.get(0).tagName.toLowerCase()&&(this.select=o=s.element),o&&e.each("id multiple ajax query createSearchChoice initSelection data tags".split(" "),function(){if(this in s)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),s=e.extend({},{populateResults:function(i,n,a){var o,r=this.opts.id,l=this;o=function(i,n,c){var h,u,d,f,p,m,v;for(h=0,u=i.length;u>h;h+=1)d=i[h],f=r(d)!==t,p=d.children&&d.children.length>0,m=e("<li></li>"),m.addClass("select2-results-dept-"+c),m.addClass("select2-result"),m.addClass(f?"select2-result-selectable":"select2-result-unselectable"),p&&m.addClass("select2-result-with-children"),m.addClass(l.opts.formatResultCssClass(d)),f=e("<div></div>"),f.addClass("select2-result-label"),v=s.formatResult(d,f,a),v!==t&&f.html(l.opts.escapeMarkup(v)),m.append(f),p&&(p=e("<ul></ul>"),p.addClass("select2-result-sub"),o(d.children,p,c+1),m.append(p)),m.data("select2-data",d),n.append(m)},o(n,i,0)}},e.fn.select2.defaults,s),"function"!=typeof s.id&&(r=s.id,s.id=function(e){return e[r]}),o?(s.query=this.bind(function(s){var i,n,o,r={results:[],more:!1},l=s.term;o=function(e,t){var i;e.is("option")?s.matcher(l,e.text(),e)&&t.push({id:e.attr("value"),text:e.text(),element:e.get(),css:e.attr("class")}):e.is("optgroup")&&(i={text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")},e.children().each2(function(e,t){o(t,i.children)}),i.children.length>0&&t.push(i))},i=a.children(),this.getPlaceholder()!==t&&i.length>0&&(n=i[0],""===e(n).text()&&(i=i.not(n))),i.each2(function(e,t){o(t,r.results)}),s.callback(r)}),s.id=function(e){return e.id},s.formatResultCssClass=function(e){return e.css}):"query"in s||("ajax"in s?((o=s.element.data("ajax-url"))&&0<o.length&&(s.ajax.url=o),s.query=l(s.ajax)):"data"in s?s.query=c(s.data):"tags"in s&&(s.query=h(s.tags),s.createSearchChoice=function(e){return{id:e,text:e}},s.initSelection=function(t,a){var o=[];e(n(t.val(),s.separator)).each(function(){var t=this,n=this,a=s.tags;e.isFunction(a)&&(a=a()),e(a).each(function(){return i(this.id,t)?(n=this.text,!1):void 0}),o.push({id:t,text:n})}),a(o)})),"function"!=typeof s.query)throw"query function not defined for Select2 "+s.element.attr("id");return s},monitorSource:function(){this.opts.element.bind("change.select2",this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}))},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass("select2-container-disabled"))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,s=this.container.offset(),i=this.container.outerHeight(),n=this.container.outerWidth(),a=this.dropdown.outerHeight(),o=e(window).scrollTop()+document.documentElement.clientHeight,i=s.top+i,r=s.left,o=o>=i+a,l=s.top-a>=this.body().scrollTop(),c=this.dropdown.hasClass("select2-drop-above");"static"!==this.body().css("position")&&(t=this.body().offset(),i-=t.top,r-=t.left),c?(c=!0,!l&&o&&(c=!1)):(c=!1,!o&&l&&(c=!0)),c?(i=s.top-a,this.container.addClass("select2-drop-above"),this.dropdown.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")),s=e.extend({top:i,left:r,width:n},d(this.opts.dropdownCss)),this.dropdown.css(s)},shouldOpen:function(){var t;return this.opened()?!1:(t=e.Event("open"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(window.setTimeout(this.bind(this.opening),1),!0):!1},opening:function(){var t=this.containerId,s=this.containerSelector,i="scroll."+t,n="resize."+t;this.container.parents().each(function(){e(this).bind(i,function(){var t=e(s);0==t.length&&e(this).unbind(i),t.select2("close")})}),e(window).bind(n,function(){var t=e(s);0==t.length&&e(window).unbind(n),t.select2("close")}),this.clearDropdownAlignmentPreference()," "===this.search.val()&&this.search.val(""),this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.updateResults(!0),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this.ensureHighlightVisible(),this.focusSearch()},close:function(){if(this.opened()){var t=this;this.container.parents().each(function(){e(this).unbind("scroll."+t.containerId)}),e(window).unbind("resize."+this.containerId),this.clearDropdownAlignmentPreference(),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.opts.element.trigger(e.Event("close"))}},clearSearch:function(){},ensureHighlightVisible:function(){var t,s,i,n,a=this.results;s=this.highlight(),0>s||(0==s?a.scrollTop(0):(t=a.find(".select2-result-selectable"),i=e(t[s]),n=i.offset().top+i.outerHeight(),s===t.length-1&&(t=a.find("li.select2-more-results"),0<t.length&&(n=t.offset().top+t.outerHeight())),t=a.offset().top+a.outerHeight(),n>t&&a.scrollTop(a.scrollTop()+(n-t)),i=i.offset().top-a.offset().top,0>i&&a.scrollTop(a.scrollTop()+i)))},moveHighlight:function(t){for(var s=this.results.find(".select2-result-selectable"),i=this.highlight();i>-1&&i<s.length;){var i=i+t,n=e(s[i]);if(n.hasClass("select2-result-selectable")&&!n.hasClass("select2-disabled")){this.highlight(i);break}}},highlight:function(t){var i=this.results.find(".select2-result-selectable").not(".select2-disabled");return 0===arguments.length?s(i.filter(".select2-highlighted")[0],i.get()):(t>=i.length&&(t=i.length-1),0>t&&(t=0),i.removeClass("select2-highlighted"),e(i[t]).addClass("select2-highlighted"),this.ensureHighlightVisible(),void 0)},countSelectableResults:function(){return this.results.find(".select2-result-selectable").not(".select2-disabled").length},highlightUnderEvent:function(t){if(t=e(t.target).closest(".select2-result-selectable"),0<t.length&&!t.is(".select2-highlighted")){var s=this.results.find(".select2-result-selectable");this.highlight(s.index(t))}else 0==t.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var e,t=this.results,s=t.find("li.select2-more-results"),i=this.resultsPage+1,n=this,a=this.search.val(),o=this.context;0!==s.length&&(e=s.offset().top-t.offset().top-t.height(),0>=e&&(s.addClass("select2-active"),this.opts.query({term:a,page:i,context:o,matcher:this.opts.matcher,callback:this.bind(function(e){n.opened()&&(n.opts.populateResults.call(this,t,e.results,{term:a,page:i,context:o}),!0===e.more?(s.detach().appendTo(t).text(n.opts.formatLoadMore(i+1)),window.setTimeout(function(){n.loadMoreIfNeeded()},10)):s.remove(),n.positionDropdown(),n.resultsPage=i)})})))},tokenize:function(){},updateResults:function(s){function n(){l.scrollTop(0),r.removeClass("select2-active"),h.positionDropdown()}function a(e){l.html(h.opts.escapeMarkup(e)),n()}var o,r=this.search,l=this.results,c=this.opts,h=this;if(!0===s||!1!==this.showSearchInput&&this.opened()){if(r.addClass("select2-active"),1<=c.maximumSelectionSize&&(o=this.data(),e.isArray(o)&&o.length>=c.maximumSelectionSize&&u(c.formatSelectionTooBig,"formatSelectionTooBig")))return a("<li class='select2-selection-limit'>"+c.formatSelectionTooBig(c.maximumSelectionSize)+"</li>"),void 0;r.val().length<c.minimumInputLength&&u(c.formatInputTooShort,"formatInputTooShort")?a("<li class='select2-no-results'>"+c.formatInputTooShort(r.val(),c.minimumInputLength)+"</li>"):(a("<li class='select2-searching'>"+c.formatSearching()+"</li>"),o=this.tokenize(),o!=t&&null!=o&&r.val(o),this.resultsPage=1,c.query({term:r.val(),page:this.resultsPage,context:null,matcher:c.matcher,callback:this.bind(function(o){var d;this.opened()&&(this.context=o.context===t?null:o.context,this.opts.createSearchChoice&&""!==r.val()&&(d=this.opts.createSearchChoice.call(null,r.val(),o.results),d!==t&&null!==d&&h.id(d)!==t&&null!==h.id(d)&&0===e(o.results).filter(function(){return i(h.id(this),h.id(d))}).length&&o.results.unshift(d)),0===o.results.length&&u(c.formatNoMatches,"formatNoMatches")?a("<li class='select2-no-results'>"+c.formatNoMatches(r.val())+"</li>"):(l.empty(),h.opts.populateResults.call(this,l,o.results,{term:r.val(),page:this.resultsPage,context:null}),!0===o.more&&u(c.formatLoadMore,"formatLoadMore")&&(l.append("<li class='select2-more-results'>"+h.opts.escapeMarkup(c.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(o,s),n()))})}))}},cancel:function(){this.close()},blur:function(){this.close(),this.container.removeClass("select2-container-active"),this.dropdown.removeClass("select2-drop-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){this.search.show(),this.search.focus(),window.setTimeout(this.bind(function(){this.search.show(),this.search.focus(),this.search.val(this.search.val())}),10)},selectHighlighted:function(){var e=this.highlight(),t=this.results.find(".select2-highlighted").not(".select2-disabled"),s=t.closest(".select2-result-selectable").data("select2-data");s&&(t.addClass("select2-disabled"),this.highlight(e),this.onSelect(s))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){var s=function(){var s,i,n,a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth()?"auto":this.opts.element.outerWidth()+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(s=this.opts.element.attr("style"),s!==t)for(s=s.split(";"),n=0,a=s.length;a>n;n+=1)if(i=s[n].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/),null!==i&&1<=i.length)return i[1];return"resolve"===this.opts.width?(s=this.opts.element.css("width"),0<s.indexOf("%")?s:0===this.opts.element.outerWidth()?"auto":this.opts.element.outerWidth()+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==s&&this.container.attr("style","width: "+s)}}),b=m(g,{createContainer:function(){return e("<div></div>",{"class":"select2-container"}).html("    <a href='#' onclick='return false;' class='select2-choice'>   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>   <div><b></b></div></a>    <div class='select2-drop select2-offscreen'>   <div class='select2-search'>       <input type='text' autocomplete='off' class='select2-input'/>   </div>   <ul class='select2-results'>   </ul></div>")},opening:function(){this.search.show(),this.parent.opening.apply(this,arguments),this.dropdown.removeClass("select2-offscreen")},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.dropdown.removeAttr("style").addClass("select2-offscreen").insertAfter(this.selection).show())},focus:function(){this.close(),this.selection.focus()},isFocused:function(){return this.selection[0]===document.activeElement},cancel:function(){this.parent.cancel.apply(this,arguments),this.selection.focus()},initContainer:function(){var e,t=this.dropdown;this.selection=e=this.container.find(".select2-choice"),this.search.bind("keydown",this.bind(function(e){if(this.enabled)if(e.which===v.PAGE_UP||e.which===v.PAGE_DOWN)o(e);else if(this.opened())switch(e.which){case v.UP:case v.DOWN:this.moveHighlight(e.which===v.UP?-1:1),o(e);break;case v.TAB:case v.ENTER:this.selectHighlighted(),o(e);break;case v.ESC:this.cancel(e),o(e)}else e.which===v.TAB||v.isControl(e)||v.isFunctionKey(e)||e.which===v.ESC||!1===this.opts.openOnEnter&&e.which===v.ENTER||this.open()})),this.search.bind("focus",this.bind(function(){this.selection.attr("tabIndex","-1")})),this.search.bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active"),window.setTimeout(this.bind(function(){this.selection.attr("tabIndex",this.opts.element.attr("tabIndex"))}),10)})),e.bind("mousedown",this.bind(function(){this.opened()?(this.close(),this.selection.focus()):this.enabled&&this.open()})),t.bind("mousedown",this.bind(function(){this.search.focus()})),e.bind("focus",this.bind(function(){this.container.addClass("select2-container-active"),this.search.attr("tabIndex","-1")})),e.bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active"),window.setTimeout(this.bind(function(){this.search.attr("tabIndex",this.opts.element.attr("tabIndex"))}),10)})),e.bind("keydown",this.bind(function(e){if(this.enabled)if(e.which===v.PAGE_UP||e.which===v.PAGE_DOWN)o(e);else if(!(e.which===v.TAB||v.isControl(e)||v.isFunctionKey(e)||e.which===v.ESC||!1===this.opts.openOnEnter&&e.which===v.ENTER))if(e.which==v.DELETE)this.opts.allowClear&&this.clear();else{if(this.open(),e.which!==v.ENTER&&!(48>e.which)){var t=String.fromCharCode(e.which).toLowerCase();e.shiftKey&&(t=t.toUpperCase()),this.search.focus(),this.search.val(t)}o(e)}})),e.delegate("abbr","mousedown",this.bind(function(e){this.enabled&&(this.clear(),o(e),this.close(),this.triggerChange(),this.selection.focus())})),this.setPlaceholder(),this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")}))},clear:function(){this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder()},initSelection:function(){if(""===this.opts.element.val())this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(s){s!==t&&null!==s&&(e.updateSelection(s),e.close(),e.setPlaceholder())})}},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);return"select"===t.element.get(0).tagName.toLowerCase()&&(t.initSelection=function(t,s){var i=t.find(":selected");e.isFunction(s)&&s({id:i.attr("value"),text:i.text()})}),t},setPlaceholder:function(){var e=this.getPlaceholder();""===this.opts.element.val()&&e!==t&&!(this.select&&""!==this.select.find("option:first").text())&&(this.selection.find("span").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.selection.find("abbr").hide())},postprocessResults:function(t,s){var n=0,a=this,o=!0;this.results.find(".select2-result-selectable").each2(function(e,t){return i(a.id(t.data("select2-data")),a.opts.element.val())?(n=e,!1):void 0}),this.highlight(n),!0===s&&(o=this.showSearchInput=f(t.results)>=this.opts.minimumResultsForSearch,this.dropdown.find(".select2-search")[o?"removeClass":"addClass"]("select2-search-hidden"),e(this.dropdown,this.container)[o?"addClass":"removeClass"]("select2-with-searchbox"))},onSelect:function(e){var t=this.opts.element.val();this.opts.element.val(this.id(e)),this.updateSelection(e),this.close(),this.selection.focus(),i(t,this.id(e))||this.triggerChange()},updateSelection:function(e){var s=this.selection.find("span");this.selection.data("select2-data",e),s.empty(),e=this.opts.formatSelection(e,s),e!==t&&s.append(this.opts.escapeMarkup(e)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.selection.find("abbr").show()},val:function(){var e,s=null,i=this;if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],this.select)this.select.val(e).find(":selected").each2(function(e,t){return s={id:t.attr("value"),text:t.text()},!1}),this.updateSelection(s),this.setPlaceholder();else{if(this.opts.initSelection===t)throw Error("cannot call val() if initSelection() is not defined");e?(this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){i.opts.element.val(e?i.id(e):""),i.updateSelection(e),i.setPlaceholder()})):this.clear()}},clearSearch:function(){this.search.val("")},data:function(e){var s;return 0===arguments.length?(s=this.selection.data("select2-data"),s==t&&(s=null),s):(e&&""!==e?(this.opts.element.val(e?this.id(e):""),this.updateSelection(e)):this.clear(),void 0)}}),w=m(g,{createContainer:function(){return e("<div></div>",{"class":"select2-container select2-container-multi"}).html("    <ul class='select2-choices'>  <li class='select2-search-field'>    <input type='text' autocomplete='off' class='select2-input'>  </li></ul><div class='select2-drop select2-drop-multi' style='display:none;'>   <ul class='select2-results'>   </ul></div>")},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);return"select"===t.element.get(0).tagName.toLowerCase()&&(t.initSelection=function(t,s){var i=[];t.find(":selected").each2(function(e,t){i.push({id:t.attr("value"),text:t.text()})}),e.isFunction(s)&&s(i)}),t},initContainer:function(){var t;this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(".select2-choices"),this.search.bind("keydown",this.bind(function(e){if(this.enabled){if(e.which===v.BACKSPACE&&""===this.search.val()){this.close();var s;if(s=t.find(".select2-search-choice-focus"),0<s.length)return this.unselect(s.first()),this.search.width(10),o(e),void 0;s=t.find(".select2-search-choice"),0<s.length&&s.last().addClass("select2-search-choice-focus")}else t.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(e.which){case v.UP:case v.DOWN:return this.moveHighlight(e.which===v.UP?-1:1),o(e),void 0;case v.ENTER:case v.TAB:return this.selectHighlighted(),o(e),void 0;case v.ESC:return this.cancel(e),o(e),void 0}e.which===v.TAB||v.isControl(e)||v.isFunctionKey(e)||e.which===v.BACKSPACE||e.which===v.ESC||!1===this.opts.openOnEnter&&e.which===v.ENTER||(this.open(),(e.which===v.PAGE_UP||e.which===v.PAGE_DOWN)&&o(e))}})),this.search.bind("keyup",this.bind(this.resizeSearch)),this.search.bind("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.clearSearch(),e.stopImmediatePropagation()})),this.container.delegate(".select2-choices","mousedown",this.bind(function(t){this.enabled&&!(0<e(t.target).closest(".select2-search-choice").length)&&(this.clearPlaceholder(),this.open(),this.focusSearch(),t.preventDefault())})),this.container.delegate(".select2-choices","focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.removeAttr("disabled"))},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0))},initSelection:function(){if(""===this.opts.element.val()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(s){s!==t&&null!==s&&(e.updateSelection(s),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder();e!==t&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.resizeSearch()):this.search.val(" ").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")?this.search.val("").removeClass("select2-default"):" "===this.search.val()&&this.search.val("")},opening:function(){this.parent.opening.apply(this,arguments),this.clearPlaceholder(),this.resizeSearch(),this.focusSearch()},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var i=[],n=[],a=this;e(t).each(function(){0>s(a.id(this),i)&&(i.push(a.id(this)),n.push(this))}),t=n,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){a.addSelectedChoice(this)}),a.postprocessResults()},tokenize:function(){var e=this.search.val(),e=this.opts.tokenizer(e,this.data(),this.bind(this.onSelect),this.opts);null!=e&&e!=t&&(this.search.val(e),0<e.length&&this.open())},onSelect:function(e){this.addSelectedChoice(e),this.select&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),this.positionDropdown()):this.close(),this.triggerChange({added:e}),this.focusSearch()},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(t){var s,i=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),n=this.id(t),a=this.getVal();s=this.opts.formatSelection(t,i),i.find("div").replaceWith("<div>"+this.opts.escapeMarkup(s)+"</div>"),i.find(".select2-search-choice-close").bind("mousedown",o).bind("click dblclick",this.bind(function(t){this.enabled&&(e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),o(t))})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),i.data("select2-data",t),i.insertBefore(this.searchContainer),a.push(n),this.setVal(a)},unselect:function(e){var t,i,n=this.getVal(),e=e.closest(".select2-search-choice");if(0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";t=e.data("select2-data"),i=s(this.id(t),n),i>=0&&(n.splice(i,1),this.setVal(n),this.select&&this.postprocessResults()),e.remove(),this.triggerChange({removed:t})},postprocessResults:function(){var e=this.getVal(),t=this.results.find(".select2-result-selectable"),i=this.results.find(".select2-result-with-children"),n=this;t.each2(function(t,i){var a=n.id(i.data("select2-data"));0<=s(a,e)?i.addClass("select2-disabled").removeClass("select2-result-selectable"):i.removeClass("select2-disabled").addClass("select2-result-selectable")}),i.each2(function(e,t){0==t.find(".select2-result-selectable").length?t.addClass("select2-disabled"):t.removeClass("select2-disabled")}),t.each2(function(e,t){return!t.hasClass("select2-disabled")&&t.hasClass("select2-result-selectable")?(n.highlight(0),!1):void 0})},resizeSearch:function(){var t,s,i,n,a=this.search.outerWidth()-this.search.width();t=this.search,y||(i=t[0].currentStyle||window.getComputedStyle(t[0],null),y=e("<div></div>").css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"}),e("body").append(y)),y.text(t.val()),t=y.width()+10,s=this.search.offset().left,i=this.selection.width(),n=this.selection.offset().left,s=i-(s-n)-a,t>s&&(s=i-a),40>s&&(s=i-a),this.search.width(s)},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),n(e,this.opts.separator))},setVal:function(t){var i;this.select?this.select.val(t):(i=[],e(t).each(function(){0>s(this,i)&&i.push(this)}),this.opts.element.val(0===i.length?"":i.join(this.opts.separator)))},val:function(){var s,i=[],n=this;if(0===arguments.length)return this.getVal();if(s=arguments[0])if(this.setVal(s),this.select)this.select.find(":selected").each(function(){i.push({id:e(this).attr("value"),text:e(this).text()})}),this.updateSelection(i);else{if(this.opts.initSelection===t)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var s=e(t).map(n.id);n.setVal(s),n.updateSelection(t),n.clearSearch()})}else this.opts.element.val(""),this.updateSelection([]);this.clearSearch()},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],s=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(s.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t){var s,i=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(t||(t=[]),s=e.map(t,function(e){return i.opts.id(e)
}),this.setVal(s),this.updateSelection(t),this.clearSearch(),void 0)}}),e.fn.select2=function(){var i,n,a,o,r=Array.prototype.slice.call(arguments,0),l="val destroy opened open close focus isFocused container onSortStart onSortEnd enable disable positionDropdown data".split(" ");return this.each(function(){if(0===r.length||"object"==typeof r[0])i=0===r.length?{}:e.extend({},r[0]),i.element=e(this),"select"===i.element.get(0).tagName.toLowerCase()?o=i.element.attr("multiple"):(o=i.multiple||!1,"tags"in i&&(i.multiple=o=!0)),n=o?new w:new b,n.init(i);else{if("string"!=typeof r[0])throw"Invalid arguments to select2 plugin: "+r;if(0>s(r[0],l))throw"Unknown method: "+r[0];if(a=t,n=e(this).data("select2"),n!==t&&(a="container"===r[0]?n.container:n[r[0]].apply(n,r.slice(1)),a!==t))return!1}}),a===t?this:a},e.fn.select2.defaults={width:"copy",closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,s){return t=[],r(e.text,s.term,t),t.join("")},formatSelection:function(e){return e?e.text:t},formatResultCssClass:function(){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){return"Please enter "+(t-e.length)+" more characters"},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return 0<=t.toUpperCase().indexOf(e.toUpperCase())},separator:",",tokenSeparators:[],tokenizer:p,escapeMarkup:function(e){return e&&"string"==typeof e?e.replace(/&/g,"&amp;"):e},blurOnChange:!1},window.Select2={query:{ajax:l,local:c,tags:h},util:{debounce:a,markMatch:r},"class":{"abstract":g,single:b,multi:w}}}}(jQuery);